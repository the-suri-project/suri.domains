import{b as ht,a as ia,i as sa}from"./index.09d78fdd.js";var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qs(n){if(n.__esModule)return n;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(e){var r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return n[e]}})}),t}function Ei(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function oa(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function Hs(n,...t){if(!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function aa(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ei(n.outputLen),Ei(n.blockLen)}function ca(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ua(n,t){Hs(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Ve={number:Ei,bool:oa,bytes:Hs,hash:aa,exists:ca,output:ua};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fa=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),ui=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),He=(n,t)=>n<<32-t|n>>>t,ha=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ha)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function la(n){if(typeof n!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof n}`);return new TextEncoder().encode(n)}function En(n){if(typeof n=="string"&&(n=la(n)),!(n instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof n})`);return n}class $s{clone(){return this._cloneInto()}}function $r(n){const t=r=>n().update(En(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function da(n){const t=(r,s)=>n(s).update(En(r)).digest(),e=n({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=r=>n(r),t}function pa(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),f=Number(e&i),d=r?4:0,v=r?0:4;n.setUint32(t+d,a,r),n.setUint32(t+v,f,r)}class Ks extends $s{constructor(t,e,r,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ui(this.buffer)}update(t){Ve.exists(this);const{view:e,buffer:r,blockLen:s}=this;t=En(t);const i=t.length;for(let a=0;a<i;){const f=Math.min(s-this.pos,i-a);if(f===s){const d=ui(t);for(;s<=i-a;a+=s)this.process(d,a);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,a+=f,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ve.exists(this),Ve.output(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let d=a;d<s;d++)e[d]=0;pa(r,s-8,BigInt(this.length*8),i),this.process(r,0);const f=ui(t);this.get().forEach((d,v)=>f.setUint32(4*v,d,i))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:a,pos:f}=this;return t.length=s,t.pos=f,t.finished=i,t.destroyed=a,s%e&&t.buffer.set(r),t}}const Qr=BigInt(2**32-1),Ai=BigInt(32);function Ws(n,t=!1){return t?{h:Number(n&Qr),l:Number(n>>Ai&Qr)}:{h:Number(n>>Ai&Qr)|0,l:Number(n&Qr)|0}}function ga(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:a}=Ws(n[s],t);[e[s],r[s]]=[i,a]}return[e,r]}const ya=(n,t)=>BigInt(n>>>0)<<Ai|BigInt(t>>>0),ma=(n,t,e)=>n>>>e,wa=(n,t,e)=>n<<32-e|t>>>e,ba=(n,t,e)=>n>>>e|t<<32-e,va=(n,t,e)=>n<<32-e|t>>>e,xa=(n,t,e)=>n<<64-e|t>>>e-32,_a=(n,t,e)=>n>>>e-32|t<<64-e,Sa=(n,t)=>t,Ba=(n,t)=>n,Ea=(n,t,e)=>n<<e|t>>>32-e,Aa=(n,t,e)=>t<<e|n>>>32-e,Ia=(n,t,e)=>t<<e-32|n>>>64-e,ka=(n,t,e)=>n<<e-32|t>>>64-e;function Ma(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Ra=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Ta=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,La=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Ua=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Ca=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Oa=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,at={fromBig:Ws,split:ga,toBig:ya,shrSH:ma,shrSL:wa,rotrSH:ba,rotrSL:va,rotrBH:xa,rotrBL:_a,rotr32H:Sa,rotr32L:Ba,rotlSH:Ea,rotlSL:Aa,rotlBH:Ia,rotlBL:ka,add:Ma,add3L:Ra,add3H:Ta,add4L:La,add4H:Ua,add5H:Oa,add5L:Ca},[Fa,Na]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Je=new Uint32Array(80),Qe=new Uint32Array(80);class Oi extends Ks{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:a,Dh:f,Dl:d,Eh:v,El:S,Fh:A,Fl:M,Gh:E,Gl:R,Hh:k,Hl:U}=this;return[t,e,r,s,i,a,f,d,v,S,A,M,E,R,k,U]}set(t,e,r,s,i,a,f,d,v,S,A,M,E,R,k,U){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=f|0,this.Dl=d|0,this.Eh=v|0,this.El=S|0,this.Fh=A|0,this.Fl=M|0,this.Gh=E|0,this.Gl=R|0,this.Hh=k|0,this.Hl=U|0}process(t,e){for(let C=0;C<16;C++,e+=4)Je[C]=t.getUint32(e),Qe[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){const $=Je[C-15]|0,D=Qe[C-15]|0,K=at.rotrSH($,D,1)^at.rotrSH($,D,8)^at.shrSH($,D,7),W=at.rotrSL($,D,1)^at.rotrSL($,D,8)^at.shrSL($,D,7),V=Je[C-2]|0,mt=Qe[C-2]|0,Ot=at.rotrSH(V,mt,19)^at.rotrBH(V,mt,61)^at.shrSH(V,mt,6),pt=at.rotrSL(V,mt,19)^at.rotrBL(V,mt,61)^at.shrSL(V,mt,6),Ft=at.add4L(W,pt,Qe[C-7],Qe[C-16]),y=at.add4H(Ft,K,Ot,Je[C-7],Je[C-16]);Je[C]=y|0,Qe[C]=Ft|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:f,Cl:d,Dh:v,Dl:S,Eh:A,El:M,Fh:E,Fl:R,Gh:k,Gl:U,Hh:z,Hl:P}=this;for(let C=0;C<80;C++){const $=at.rotrSH(A,M,14)^at.rotrSH(A,M,18)^at.rotrBH(A,M,41),D=at.rotrSL(A,M,14)^at.rotrSL(A,M,18)^at.rotrBL(A,M,41),K=A&E^~A&k,W=M&R^~M&U,V=at.add5L(P,D,W,Na[C],Qe[C]),mt=at.add5H(V,z,$,K,Fa[C],Je[C]),Ot=V|0,pt=at.rotrSH(r,s,28)^at.rotrBH(r,s,34)^at.rotrBH(r,s,39),Ft=at.rotrSL(r,s,28)^at.rotrBL(r,s,34)^at.rotrBL(r,s,39),y=r&i^r&f^i&f,o=s&a^s&d^a&d;z=k|0,P=U|0,k=E|0,U=R|0,E=A|0,R=M|0,{h:A,l:M}=at.add(v|0,S|0,mt|0,Ot|0),v=f|0,S=d|0,f=i|0,d=a|0,i=r|0,a=s|0;const l=at.add3L(Ot,Ft,o);r=at.add3H(l,mt,pt,y),s=l|0}({h:r,l:s}=at.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=at.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:f,l:d}=at.add(this.Ch|0,this.Cl|0,f|0,d|0),{h:v,l:S}=at.add(this.Dh|0,this.Dl|0,v|0,S|0),{h:A,l:M}=at.add(this.Eh|0,this.El|0,A|0,M|0),{h:E,l:R}=at.add(this.Fh|0,this.Fl|0,E|0,R|0),{h:k,l:U}=at.add(this.Gh|0,this.Gl|0,k|0,U|0),{h:z,l:P}=at.add(this.Hh|0,this.Hl|0,z|0,P|0),this.set(r,s,i,a,f,d,v,S,A,M,E,R,k,U,z,P)}roundClean(){Je.fill(0),Qe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Pa extends Oi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Da extends Oi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const za=$r(()=>new Oi);$r(()=>new Pa);$r(()=>new Da);var qa={},Ha=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"}));/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const we=BigInt(0),yt=BigInt(1),Be=BigInt(2),Gs=BigInt(255),ds=Be**BigInt(252)+BigInt("27742317777372353535851937790883648493"),Rt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:Be**Gs-BigInt(19),l:ds,n:ds,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),js=Be**BigInt(256),Cr=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const $a=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Ka=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Wa=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ga=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class wt{constructor(t,e,r,s){this.x=t,this.y=e,this.z=r,this.t=s}static fromAffine(t){if(!(t instanceof Wt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(Wt.ZERO)?wt.ZERO:new wt(t.x,t.y,yt,q(t.x*t.y))}static toAffineBatch(t){const e=Va(t.map(r=>r.z));return t.map((r,s)=>r.toAffine(e[s]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){ps(t);const{x:e,y:r,z:s}=this,{x:i,y:a,z:f}=t,d=q(e*f),v=q(i*s),S=q(r*f),A=q(a*s);return d===v&&S===A}negate(){return new wt(q(-this.x),this.y,this.z,q(-this.t))}double(){const{x:t,y:e,z:r}=this,{a:s}=Rt,i=q(t**Be),a=q(e**Be),f=q(Be*q(r**Be)),d=q(s*i),v=q(q((t+e)**Be)-i-a),S=d+a,A=S-f,M=d-a,E=q(v*A),R=q(S*M),k=q(v*M),U=q(A*S);return new wt(E,R,U,k)}add(t){ps(t);const{x:e,y:r,z:s,t:i}=this,{x:a,y:f,z:d,t:v}=t,S=q((r-e)*(f+a)),A=q((r+e)*(f-a)),M=q(A-S);if(M===we)return this.double();const E=q(s*Be*v),R=q(i*Be*d),k=R+E,U=A+S,z=R-E,P=q(k*M),C=q(U*z),$=q(k*z),D=q(M*U);return new wt(P,C,D,$)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,r=[];let s=this,i=s;for(let a=0;a<e;a++){i=s,r.push(i);for(let f=1;f<2**(t-1);f++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(t,e){!e&&this.equals(wt.BASE)&&(e=Wt.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=e&&Ii.get(e);s||(s=this.precomputeWindow(r),e&&r!==1&&(s=wt.normalizeZ(s),Ii.set(e,s)));let i=wt.ZERO,a=wt.ZERO;const f=1+256/r,d=2**(r-1),v=BigInt(2**r-1),S=2**r,A=BigInt(r);for(let M=0;M<f;M++){const E=M*d;let R=Number(t&v);if(t>>=A,R>d&&(R-=S,t+=yt),R===0){let k=s[E];M%2&&(k=k.negate()),a=a.add(k)}else{let k=s[E+Math.abs(R)-1];R<0&&(k=k.negate()),i=i.add(k)}}return wt.normalizeZ([i,a])[0]}multiply(t,e){return this.wNAF(ln(t,Rt.l),e)}multiplyUnsafe(t){let e=ln(t,Rt.l,!1);const r=wt.BASE,s=wt.ZERO;if(e===we)return s;if(this.equals(s)||e===yt)return this;if(this.equals(r))return this.wNAF(e);let i=s,a=this;for(;e>we;)e&yt&&(i=i.add(a)),a=a.double(),e>>=yt;return i}isSmallOrder(){return this.multiplyUnsafe(Rt.h).equals(wt.ZERO)}isTorsionFree(){return this.multiplyUnsafe(Rt.l).equals(wt.ZERO)}toAffine(t=An(this.z)){const{x:e,y:r,z:s}=this,i=q(e*t),a=q(r*t);if(q(s*t)!==yt)throw new Error("invZ was invalid");return new Wt(i,a)}fromRistrettoBytes(){hi()}toRistrettoBytes(){hi()}fromRistrettoHash(){hi()}}wt.BASE=new wt(Rt.Gx,Rt.Gy,yt,q(Rt.Gx*Rt.Gy));wt.ZERO=new wt(we,yt,yt,we);function ps(n){if(!(n instanceof wt))throw new TypeError("ExtendedPoint expected")}function fi(n){if(!(n instanceof Fe))throw new TypeError("RistrettoPoint expected")}function hi(){throw new Error("Legacy method: switch to RistrettoPoint")}class Fe{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=Rt,r=q(Cr*t*t),s=q((r+yt)*Wa);let i=BigInt(-1);const a=q((i-e*r)*q(r+e));let{isValid:f,value:d}=Ni(s,a),v=q(d*t);nr(v)||(v=q(-v)),f||(d=v),f||(i=r);const S=q(i*(r-yt)*Ga-a),A=d*d,M=q((d+d)*a),E=q(S*$a),R=q(yt-A),k=q(yt+A);return new wt(q(M*k),q(R*E),q(E*k),q(M*R))}static hashToCurve(t){t=ur(t,64);const e=li(t.slice(0,32)),r=this.calcElligatorRistrettoMap(e),s=li(t.slice(32,64)),i=this.calcElligatorRistrettoMap(s);return new Fe(r.add(i))}static fromHex(t){t=ur(t,32);const{a:e,d:r}=Rt,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=li(t);if(!Xa(Dr(i),t)||nr(i))throw new Error(s);const a=q(i*i),f=q(yt+e*a),d=q(yt-e*a),v=q(f*f),S=q(d*d),A=q(e*r*v-S),{isValid:M,value:E}=ys(q(A*S)),R=q(E*d),k=q(E*R*A);let U=q((i+i)*R);nr(U)&&(U=q(-U));const z=q(f*k),P=q(U*z);if(!M||nr(P)||z===we)throw new Error(s);return new Fe(new wt(U,z,yt,P))}toRawBytes(){let{x:t,y:e,z:r,t:s}=this.ep;const i=q(q(r+e)*q(r-e)),a=q(t*e),{value:f}=ys(q(i*a**Be)),d=q(f*i),v=q(f*a),S=q(d*v*s);let A;if(nr(s*S)){let E=q(e*Cr),R=q(t*Cr);t=E,e=R,A=q(d*Ka)}else A=v;nr(t*S)&&(e=q(-e));let M=q((r-e)*A);return nr(M)&&(M=q(-M)),Dr(M)}toHex(){return Kr(this.toRawBytes())}toString(){return this.toHex()}equals(t){fi(t);const e=this.ep,r=t.ep,s=q(e.x*r.y)===q(e.y*r.x),i=q(e.y*r.y)===q(e.x*r.x);return s||i}add(t){return fi(t),new Fe(this.ep.add(t.ep))}subtract(t){return fi(t),new Fe(this.ep.subtract(t.ep))}multiply(t){return new Fe(this.ep.multiply(t))}multiplyUnsafe(t){return new Fe(this.ep.multiplyUnsafe(t))}}Fe.BASE=new Fe(wt.BASE);Fe.ZERO=new Fe(wt.ZERO);const Ii=new WeakMap;class Wt{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Ii.delete(this)}static fromHex(t,e=!0){const{d:r,P:s}=Rt;t=ur(t,32);const i=t.slice();i[31]=t[31]&-129;const a=Wr(i);if(e&&a>=s)throw new Error("Expected 0 < hex < P");if(!e&&a>=js)throw new Error("Expected 0 < hex < 2**256");const f=q(a*a),d=q(f-yt),v=q(r*f+yt);let{isValid:S,value:A}=Ni(d,v);if(!S)throw new Error("Point.fromHex: invalid y coordinate");const M=(A&yt)===yt;return(t[31]&128)!==0!==M&&(A=q(-A)),new Wt(A,a)}static async fromPrivateKey(t){return(await Ys(t)).point}toRawBytes(){const t=Dr(this.y);return t[31]|=this.x&yt?128:0,t}toHex(){return Kr(this.toRawBytes())}toX25519(){const{y:t}=this,e=q((yt+t)*An(yt-t));return Dr(e)}isTorsionFree(){return wt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Wt(q(-this.x),this.y)}add(t){return wt.fromAffine(this).add(wt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return wt.fromAffine(this).multiply(t,this).toAffine()}}Wt.BASE=new Wt(Rt.Gx,Rt.Gy);Wt.ZERO=new Wt(we,yt);class Pr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=ur(t,64),r=Wt.fromHex(e.slice(0,32),!1),s=Wr(e.slice(32,64));return new Pr(r,s)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof Wt))throw new Error("Expected Point instance");return ln(e,Rt.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Dr(this.s),32),t}toHex(){return Kr(this.toRawBytes())}}function gs(...n){if(!n.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(n.length===1)return n[0];const t=n.reduce((r,s)=>r+s.length,0),e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}const ja=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Kr(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=ja[n[e]];return t}function Fi(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(n.length/2);for(let e=0;e<t.length;e++){const r=e*2,s=n.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function Vs(n){const e=n.toString(16).padStart(64,"0");return Fi(e)}function Dr(n){return Vs(n).reverse()}function nr(n){return(q(n)&yt)===yt}function Wr(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Kr(Uint8Array.from(n).reverse()))}function li(n){return q(Wr(n)&Be**Gs-yt)}function q(n,t=Rt.P){const e=n%t;return e>=we?e:t+e}function An(n,t=Rt.P){if(n===we||t<=we)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=q(n,t),r=t,s=we,i=yt;for(;e!==we;){const f=r/e,d=r%e,v=s-i*f;r=e,e=d,s=i,i=v}if(r!==yt)throw new Error("invert: does not exist");return q(s,t)}function Va(n,t=Rt.P){const e=new Array(n.length),r=n.reduce((i,a,f)=>a===we?i:(e[f]=i,q(i*a,t)),yt),s=An(r,t);return n.reduceRight((i,a,f)=>a===we?i:(e[f]=q(i*e[f],t),q(i*a,t)),s),e}function $e(n,t){const{P:e}=Rt;let r=n;for(;t-- >we;)r*=r,r%=e;return r}function Za(n){const{P:t}=Rt,e=BigInt(5),r=BigInt(10),s=BigInt(20),i=BigInt(40),a=BigInt(80),d=n*n%t*n%t,v=$e(d,Be)*d%t,S=$e(v,yt)*n%t,A=$e(S,e)*S%t,M=$e(A,r)*A%t,E=$e(M,s)*M%t,R=$e(E,i)*E%t,k=$e(R,a)*R%t,U=$e(k,a)*R%t,z=$e(U,r)*A%t;return{pow_p_5_8:$e(z,Be)*n%t,b2:d}}function Ni(n,t){const e=q(t*t*t),r=q(e*e*t),s=Za(n*r).pow_p_5_8;let i=q(n*e*s);const a=q(t*i*i),f=i,d=q(i*Cr),v=a===n,S=a===q(-n),A=a===q(-n*Cr);return v&&(i=f),(S||A)&&(i=d),nr(i)&&(i=q(-i)),{isValid:v||S,value:i}}function ys(n){return Ni(yt,n)}function hn(n){return q(Wr(n),Rt.l)}function Xa(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function ur(n,t){const e=n instanceof Uint8Array?Uint8Array.from(n):Fi(n);if(typeof t=="number"&&e.length!==t)throw new Error(`Expected ${t} bytes`);return e}function ln(n,t,e=!0){if(!t)throw new TypeError("Specify max value");if(typeof n=="number"&&Number.isSafeInteger(n)&&(n=BigInt(n)),typeof n=="bigint"&&n<t){if(e){if(we<n)return n}else if(we<=n)return n}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Ya(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Zs(n){if(n=typeof n=="bigint"||typeof n=="number"?Vs(ln(n,js)):ur(n),n.length!==32)throw new Error("Expected 32 bytes");return n}function Xs(n){const t=Ya(n.slice(0,32)),e=n.slice(32,64),r=hn(t),s=Wt.BASE.multiply(r),i=s.toRawBytes();return{head:t,prefix:e,scalar:r,point:s,pointBytes:i}}let Or;function dn(...n){if(typeof Or!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return Or(...n)}async function Ys(n){return Xs(await Br.sha512(Zs(n)))}function Pi(n){return Xs(dn(Zs(n)))}function Ja(n){return Pi(n).pointBytes}function Qa(n,t){n=ur(n);const{prefix:e,scalar:r,pointBytes:s}=Pi(t),i=hn(dn(e,n)),a=Wt.BASE.multiply(i),f=hn(dn(a.toRawBytes(),s,n)),d=q(i+f*r,Rt.l);return new Pr(a,d).toRawBytes()}function tc(n,t,e){t=ur(t),e instanceof Wt||(e=Wt.fromHex(e,!1));const{r,s}=n instanceof Pr?n.assertValidity():Pr.fromHex(n),i=wt.BASE.multiplyUnsafe(s);return{r,s,SB:i,pub:e,msg:t}}function ec(n,t,e,r){const s=hn(r),i=wt.fromAffine(n).multiplyUnsafe(s);return wt.fromAffine(t).add(i).subtract(e).multiplyUnsafe(Rt.h).equals(wt.ZERO)}function rc(n,t,e){const{r,SB:s,msg:i,pub:a}=tc(n,t,e),f=dn(r.toRawBytes(),a.toRawBytes(),i);return ec(a,r,s,f)}const Js={getExtendedPublicKey:Pi,getPublicKey:Ja,sign:Qa,verify:rc};Wt.BASE._setWindowSize(8);const tr={node:Ha,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Br={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:Kr,hexToBytes:Fi,concatBytes:gs,getExtendedPublicKey:Ys,mod:q,invert:An,hashToPrivateScalar:n=>{if(n=ur(n),n.length<40||n.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return q(Wr(n),Rt.l-yt)+yt},randomBytes:(n=32)=>{if(tr.web)return tr.web.getRandomValues(new Uint8Array(n));if(tr.node){const{randomBytes:t}=tr.node;return new Uint8Array(t(n).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Br.randomBytes(32),sha512:async(...n)=>{const t=gs(...n);if(tr.web){const e=await tr.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(tr.node)return Uint8Array.from(tr.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(n=8,t=Wt.BASE){const e=t.equals(Wt.BASE)?t:new Wt(t.x,t.y);return e._setWindowSize(n),e.multiply(Be),e},sha512Sync:void 0};Object.defineProperties(Br,{sha512Sync:{configurable:!1,get(){return Or},set(n){Or||(Or=n)}}});var Di={exports:{}};(function(n){(function(t,e){function r(y,o){if(!y)throw new Error(o||"Assertion failed")}function s(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function i(y,o,l){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=require("buffer").Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,g){if(typeof o=="number")return this._initNumber(o,l,g);if(typeof o=="object")return this._initArray(o,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var w=0;o[0]==="-"&&(w++,this.negative=1),w<o.length&&(l===16?this._parseHex(o,w,g):(this._parseBase(o,l,w),g==="le"&&this._initArray(this.toArray(),l,g)))},i.prototype._initNumber=function(o,l,g){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},i.prototype._initArray=function(o,l,g){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x,B,T=0;if(g==="be")for(w=o.length-1,x=0;w>=0;w-=3)B=o[w]|o[w-1]<<8|o[w-2]<<16,this.words[x]|=B<<T&67108863,this.words[x+1]=B>>>26-T&67108863,T+=24,T>=26&&(T-=26,x++);else if(g==="le")for(w=0,x=0;w<o.length;w+=3)B=o[w]|o[w+1]<<8|o[w+2]<<16,this.words[x]|=B<<T&67108863,this.words[x+1]=B>>>26-T&67108863,T+=24,T>=26&&(T-=26,x++);return this._strip()};function f(y,o){var l=y.charCodeAt(o);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+y)}function d(y,o,l){var g=f(y,l);return l-1>=o&&(g|=f(y,l-1)<<4),g}i.prototype._parseHex=function(o,l,g){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x=0,B=0,T;if(g==="be")for(w=o.length-1;w>=l;w-=2)T=d(o,l,w)<<x,this.words[B]|=T&67108863,x>=18?(x-=18,B+=1,this.words[B]|=T>>>26):x+=8;else{var b=o.length-l;for(w=b%2===0?l+1:l;w<o.length;w+=2)T=d(o,l,w)<<x,this.words[B]|=T&67108863,x>=18?(x-=18,B+=1,this.words[B]|=T>>>26):x+=8}this._strip()};function v(y,o,l,g){for(var w=0,x=0,B=Math.min(y.length,l),T=o;T<B;T++){var b=y.charCodeAt(T)-48;w*=g,b>=49?x=b-49+10:b>=17?x=b-17+10:x=b,r(b>=0&&x<g,"Invalid character"),w+=x}return w}i.prototype._parseBase=function(o,l,g){this.words=[0],this.length=1;for(var w=0,x=1;x<=67108863;x*=l)w++;w--,x=x/l|0;for(var B=o.length-g,T=B%w,b=Math.min(B,B-T)+g,h=0,_=g;_<b;_+=w)h=v(o,_,_+w,l),this.imuln(x),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(T!==0){var X=1;for(h=v(o,_,o.length,l),_=0;_<T;_++)X*=l;this.imuln(X),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red};function S(y,o){y.words=o.words,y.length=o.length,y.negative=o.negative,y.red=o.red}if(i.prototype._move=function(o){S(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var g;if(o===16||o==="hex"){g="";for(var w=0,x=0,B=0;B<this.length;B++){var T=this.words[B],b=((T<<w|x)&16777215).toString(16);x=T>>>24-w&16777215,w+=2,w>=26&&(w-=26,B--),x!==0||B!==this.length-1?g=M[6-b.length]+b+g:g=b+g}for(x!==0&&(g=x.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(o===(o|0)&&o>=2&&o<=36){var h=E[o],_=R[o];g="";var X=this.clone();for(X.negative=0;!X.isZero();){var et=X.modrn(_).toString(o);X=X.idivn(_),X.isZero()?g=et+g:g=M[h-et.length]+et+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,l){return this.toArrayLike(a,o,l)}),i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)};var k=function(o,l){return o.allocUnsafe?o.allocUnsafe(l):new o(l)};i.prototype.toArrayLike=function(o,l,g){this._strip();var w=this.byteLength(),x=g||Math.max(1,w);r(w<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var B=k(o,x),T=l==="le"?"LE":"BE";return this["_toArrayLike"+T](B,w),B},i.prototype._toArrayLikeLE=function(o,l){for(var g=0,w=0,x=0,B=0;x<this.length;x++){var T=this.words[x]<<B|w;o[g++]=T&255,g<o.length&&(o[g++]=T>>8&255),g<o.length&&(o[g++]=T>>16&255),B===6?(g<o.length&&(o[g++]=T>>24&255),w=0,B=0):(w=T>>>24,B+=2)}if(g<o.length)for(o[g++]=w;g<o.length;)o[g++]=0},i.prototype._toArrayLikeBE=function(o,l){for(var g=o.length-1,w=0,x=0,B=0;x<this.length;x++){var T=this.words[x]<<B|w;o[g--]=T&255,g>=0&&(o[g--]=T>>8&255),g>=0&&(o[g--]=T>>16&255),B===6?(g>=0&&(o[g--]=T>>24&255),w=0,B=0):(w=T>>>24,B+=2)}if(g>=0)for(o[g--]=w;g>=0;)o[g--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,g=0;return(l&8191)===0&&(g+=13,l>>>=13),(l&127)===0&&(g+=7,l>>>=7),(l&15)===0&&(g+=4,l>>>=4),(l&3)===0&&(g+=2,l>>>=2),(l&1)===0&&g++,g},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function U(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var g=l/26|0,w=l%26;o[l]=y.words[g]>>>w&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(o+=g,g!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&o.words[g];return this.length=l.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,g;this.length>o.length?(l=this,g=o):(l=o,g=this);for(var w=0;w<g.length;w++)this.words[w]=l.words[w]^g.words[w];if(this!==l)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=l.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,g=o%26;this._expand(l),g>0&&l--;for(var w=0;w<l;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){r(typeof o=="number"&&o>=0);var g=o/26|0,w=o%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this._strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var g,w;this.length>o.length?(g=this,w=o):(g=o,w=this);for(var x=0,B=0;B<w.length;B++)l=(g.words[B]|0)+(w.words[B]|0)+x,this.words[B]=l&67108863,x=l>>>26;for(;x!==0&&B<g.length;B++)l=(g.words[B]|0)+x,this.words[B]=l&67108863,x=l>>>26;if(this.length=g.length,x!==0)this.words[this.length]=x,this.length++;else if(g!==this)for(;B<g.length;B++)this.words[B]=g.words[B];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var g=this.cmp(o);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,x;g>0?(w=this,x=o):(w=o,x=this);for(var B=0,T=0;T<x.length;T++)l=(w.words[T]|0)-(x.words[T]|0)+B,B=l>>26,this.words[T]=l&67108863;for(;B!==0&&T<w.length;T++)l=(w.words[T]|0)+B,B=l>>26,this.words[T]=l&67108863;if(B===0&&T<w.length&&w!==this)for(;T<w.length;T++)this.words[T]=w.words[T];return this.length=Math.max(this.length,T),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function z(y,o,l){l.negative=o.negative^y.negative;var g=y.length+o.length|0;l.length=g,g=g-1|0;var w=y.words[0]|0,x=o.words[0]|0,B=w*x,T=B&67108863,b=B/67108864|0;l.words[0]=T;for(var h=1;h<g;h++){for(var _=b>>>26,X=b&67108863,et=Math.min(h,o.length-1),nt=Math.max(0,h-y.length+1);nt<=et;nt++){var Tt=h-nt|0;w=y.words[Tt]|0,x=o.words[nt]|0,B=w*x+X,_+=B/67108864|0,X=B&67108863}l.words[h]=X|0,b=_|0}return b!==0?l.words[h]=b|0:l.length--,l._strip()}var P=function(o,l,g){var w=o.words,x=l.words,B=g.words,T=0,b,h,_,X=w[0]|0,et=X&8191,nt=X>>>13,Tt=w[1]|0,lt=Tt&8191,Bt=Tt>>>13,Mr=w[2]|0,Nt=Mr&8191,Lt=Mr>>>13,je=w[3]|0,Et=je&8191,Pt=je>>>13,Yr=w[4]|0,kt=Yr&8191,Dt=Yr>>>13,Jr=w[5]|0,Ut=Jr&8191,At=Jr>>>13,Me=w[6]|0,Mt=Me&8191,zt=Me>>>13,Pe=w[7]|0,qt=Pe&8191,p=Pe>>>13,c=w[8]|0,u=c&8191,m=c>>>13,I=w[9]|0,L=I&8191,N=I>>>13,ut=x[0]|0,ct=ut&8191,ot=ut>>>13,It=x[1]|0,it=It&8191,jt=It>>>13,ss=x[2]|0,Vt=ss&8191,Zt=ss>>>13,os=x[3]|0,Xt=os&8191,Yt=os>>>13,as=x[4]|0,Jt=as&8191,Qt=as>>>13,cs=x[5]|0,te=cs&8191,ee=cs>>>13,us=x[6]|0,re=us&8191,ne=us>>>13,fs=x[7]|0,ie=fs&8191,se=fs>>>13,hs=x[8]|0,oe=hs&8191,ae=hs>>>13,ls=x[9]|0,ce=ls&8191,ue=ls>>>13;g.negative=o.negative^l.negative,g.length=19,b=Math.imul(et,ct),h=Math.imul(et,ot),h=h+Math.imul(nt,ct)|0,_=Math.imul(nt,ot);var Kn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,b=Math.imul(lt,ct),h=Math.imul(lt,ot),h=h+Math.imul(Bt,ct)|0,_=Math.imul(Bt,ot),b=b+Math.imul(et,it)|0,h=h+Math.imul(et,jt)|0,h=h+Math.imul(nt,it)|0,_=_+Math.imul(nt,jt)|0;var Wn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,b=Math.imul(Nt,ct),h=Math.imul(Nt,ot),h=h+Math.imul(Lt,ct)|0,_=Math.imul(Lt,ot),b=b+Math.imul(lt,it)|0,h=h+Math.imul(lt,jt)|0,h=h+Math.imul(Bt,it)|0,_=_+Math.imul(Bt,jt)|0,b=b+Math.imul(et,Vt)|0,h=h+Math.imul(et,Zt)|0,h=h+Math.imul(nt,Vt)|0,_=_+Math.imul(nt,Zt)|0;var Gn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,b=Math.imul(Et,ct),h=Math.imul(Et,ot),h=h+Math.imul(Pt,ct)|0,_=Math.imul(Pt,ot),b=b+Math.imul(Nt,it)|0,h=h+Math.imul(Nt,jt)|0,h=h+Math.imul(Lt,it)|0,_=_+Math.imul(Lt,jt)|0,b=b+Math.imul(lt,Vt)|0,h=h+Math.imul(lt,Zt)|0,h=h+Math.imul(Bt,Vt)|0,_=_+Math.imul(Bt,Zt)|0,b=b+Math.imul(et,Xt)|0,h=h+Math.imul(et,Yt)|0,h=h+Math.imul(nt,Xt)|0,_=_+Math.imul(nt,Yt)|0;var jn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(jn>>>26)|0,jn&=67108863,b=Math.imul(kt,ct),h=Math.imul(kt,ot),h=h+Math.imul(Dt,ct)|0,_=Math.imul(Dt,ot),b=b+Math.imul(Et,it)|0,h=h+Math.imul(Et,jt)|0,h=h+Math.imul(Pt,it)|0,_=_+Math.imul(Pt,jt)|0,b=b+Math.imul(Nt,Vt)|0,h=h+Math.imul(Nt,Zt)|0,h=h+Math.imul(Lt,Vt)|0,_=_+Math.imul(Lt,Zt)|0,b=b+Math.imul(lt,Xt)|0,h=h+Math.imul(lt,Yt)|0,h=h+Math.imul(Bt,Xt)|0,_=_+Math.imul(Bt,Yt)|0,b=b+Math.imul(et,Jt)|0,h=h+Math.imul(et,Qt)|0,h=h+Math.imul(nt,Jt)|0,_=_+Math.imul(nt,Qt)|0;var Vn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,b=Math.imul(Ut,ct),h=Math.imul(Ut,ot),h=h+Math.imul(At,ct)|0,_=Math.imul(At,ot),b=b+Math.imul(kt,it)|0,h=h+Math.imul(kt,jt)|0,h=h+Math.imul(Dt,it)|0,_=_+Math.imul(Dt,jt)|0,b=b+Math.imul(Et,Vt)|0,h=h+Math.imul(Et,Zt)|0,h=h+Math.imul(Pt,Vt)|0,_=_+Math.imul(Pt,Zt)|0,b=b+Math.imul(Nt,Xt)|0,h=h+Math.imul(Nt,Yt)|0,h=h+Math.imul(Lt,Xt)|0,_=_+Math.imul(Lt,Yt)|0,b=b+Math.imul(lt,Jt)|0,h=h+Math.imul(lt,Qt)|0,h=h+Math.imul(Bt,Jt)|0,_=_+Math.imul(Bt,Qt)|0,b=b+Math.imul(et,te)|0,h=h+Math.imul(et,ee)|0,h=h+Math.imul(nt,te)|0,_=_+Math.imul(nt,ee)|0;var Zn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,b=Math.imul(Mt,ct),h=Math.imul(Mt,ot),h=h+Math.imul(zt,ct)|0,_=Math.imul(zt,ot),b=b+Math.imul(Ut,it)|0,h=h+Math.imul(Ut,jt)|0,h=h+Math.imul(At,it)|0,_=_+Math.imul(At,jt)|0,b=b+Math.imul(kt,Vt)|0,h=h+Math.imul(kt,Zt)|0,h=h+Math.imul(Dt,Vt)|0,_=_+Math.imul(Dt,Zt)|0,b=b+Math.imul(Et,Xt)|0,h=h+Math.imul(Et,Yt)|0,h=h+Math.imul(Pt,Xt)|0,_=_+Math.imul(Pt,Yt)|0,b=b+Math.imul(Nt,Jt)|0,h=h+Math.imul(Nt,Qt)|0,h=h+Math.imul(Lt,Jt)|0,_=_+Math.imul(Lt,Qt)|0,b=b+Math.imul(lt,te)|0,h=h+Math.imul(lt,ee)|0,h=h+Math.imul(Bt,te)|0,_=_+Math.imul(Bt,ee)|0,b=b+Math.imul(et,re)|0,h=h+Math.imul(et,ne)|0,h=h+Math.imul(nt,re)|0,_=_+Math.imul(nt,ne)|0;var Xn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,b=Math.imul(qt,ct),h=Math.imul(qt,ot),h=h+Math.imul(p,ct)|0,_=Math.imul(p,ot),b=b+Math.imul(Mt,it)|0,h=h+Math.imul(Mt,jt)|0,h=h+Math.imul(zt,it)|0,_=_+Math.imul(zt,jt)|0,b=b+Math.imul(Ut,Vt)|0,h=h+Math.imul(Ut,Zt)|0,h=h+Math.imul(At,Vt)|0,_=_+Math.imul(At,Zt)|0,b=b+Math.imul(kt,Xt)|0,h=h+Math.imul(kt,Yt)|0,h=h+Math.imul(Dt,Xt)|0,_=_+Math.imul(Dt,Yt)|0,b=b+Math.imul(Et,Jt)|0,h=h+Math.imul(Et,Qt)|0,h=h+Math.imul(Pt,Jt)|0,_=_+Math.imul(Pt,Qt)|0,b=b+Math.imul(Nt,te)|0,h=h+Math.imul(Nt,ee)|0,h=h+Math.imul(Lt,te)|0,_=_+Math.imul(Lt,ee)|0,b=b+Math.imul(lt,re)|0,h=h+Math.imul(lt,ne)|0,h=h+Math.imul(Bt,re)|0,_=_+Math.imul(Bt,ne)|0,b=b+Math.imul(et,ie)|0,h=h+Math.imul(et,se)|0,h=h+Math.imul(nt,ie)|0,_=_+Math.imul(nt,se)|0;var Yn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,b=Math.imul(u,ct),h=Math.imul(u,ot),h=h+Math.imul(m,ct)|0,_=Math.imul(m,ot),b=b+Math.imul(qt,it)|0,h=h+Math.imul(qt,jt)|0,h=h+Math.imul(p,it)|0,_=_+Math.imul(p,jt)|0,b=b+Math.imul(Mt,Vt)|0,h=h+Math.imul(Mt,Zt)|0,h=h+Math.imul(zt,Vt)|0,_=_+Math.imul(zt,Zt)|0,b=b+Math.imul(Ut,Xt)|0,h=h+Math.imul(Ut,Yt)|0,h=h+Math.imul(At,Xt)|0,_=_+Math.imul(At,Yt)|0,b=b+Math.imul(kt,Jt)|0,h=h+Math.imul(kt,Qt)|0,h=h+Math.imul(Dt,Jt)|0,_=_+Math.imul(Dt,Qt)|0,b=b+Math.imul(Et,te)|0,h=h+Math.imul(Et,ee)|0,h=h+Math.imul(Pt,te)|0,_=_+Math.imul(Pt,ee)|0,b=b+Math.imul(Nt,re)|0,h=h+Math.imul(Nt,ne)|0,h=h+Math.imul(Lt,re)|0,_=_+Math.imul(Lt,ne)|0,b=b+Math.imul(lt,ie)|0,h=h+Math.imul(lt,se)|0,h=h+Math.imul(Bt,ie)|0,_=_+Math.imul(Bt,se)|0,b=b+Math.imul(et,oe)|0,h=h+Math.imul(et,ae)|0,h=h+Math.imul(nt,oe)|0,_=_+Math.imul(nt,ae)|0;var Jn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,b=Math.imul(L,ct),h=Math.imul(L,ot),h=h+Math.imul(N,ct)|0,_=Math.imul(N,ot),b=b+Math.imul(u,it)|0,h=h+Math.imul(u,jt)|0,h=h+Math.imul(m,it)|0,_=_+Math.imul(m,jt)|0,b=b+Math.imul(qt,Vt)|0,h=h+Math.imul(qt,Zt)|0,h=h+Math.imul(p,Vt)|0,_=_+Math.imul(p,Zt)|0,b=b+Math.imul(Mt,Xt)|0,h=h+Math.imul(Mt,Yt)|0,h=h+Math.imul(zt,Xt)|0,_=_+Math.imul(zt,Yt)|0,b=b+Math.imul(Ut,Jt)|0,h=h+Math.imul(Ut,Qt)|0,h=h+Math.imul(At,Jt)|0,_=_+Math.imul(At,Qt)|0,b=b+Math.imul(kt,te)|0,h=h+Math.imul(kt,ee)|0,h=h+Math.imul(Dt,te)|0,_=_+Math.imul(Dt,ee)|0,b=b+Math.imul(Et,re)|0,h=h+Math.imul(Et,ne)|0,h=h+Math.imul(Pt,re)|0,_=_+Math.imul(Pt,ne)|0,b=b+Math.imul(Nt,ie)|0,h=h+Math.imul(Nt,se)|0,h=h+Math.imul(Lt,ie)|0,_=_+Math.imul(Lt,se)|0,b=b+Math.imul(lt,oe)|0,h=h+Math.imul(lt,ae)|0,h=h+Math.imul(Bt,oe)|0,_=_+Math.imul(Bt,ae)|0,b=b+Math.imul(et,ce)|0,h=h+Math.imul(et,ue)|0,h=h+Math.imul(nt,ce)|0,_=_+Math.imul(nt,ue)|0;var Qn=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,b=Math.imul(L,it),h=Math.imul(L,jt),h=h+Math.imul(N,it)|0,_=Math.imul(N,jt),b=b+Math.imul(u,Vt)|0,h=h+Math.imul(u,Zt)|0,h=h+Math.imul(m,Vt)|0,_=_+Math.imul(m,Zt)|0,b=b+Math.imul(qt,Xt)|0,h=h+Math.imul(qt,Yt)|0,h=h+Math.imul(p,Xt)|0,_=_+Math.imul(p,Yt)|0,b=b+Math.imul(Mt,Jt)|0,h=h+Math.imul(Mt,Qt)|0,h=h+Math.imul(zt,Jt)|0,_=_+Math.imul(zt,Qt)|0,b=b+Math.imul(Ut,te)|0,h=h+Math.imul(Ut,ee)|0,h=h+Math.imul(At,te)|0,_=_+Math.imul(At,ee)|0,b=b+Math.imul(kt,re)|0,h=h+Math.imul(kt,ne)|0,h=h+Math.imul(Dt,re)|0,_=_+Math.imul(Dt,ne)|0,b=b+Math.imul(Et,ie)|0,h=h+Math.imul(Et,se)|0,h=h+Math.imul(Pt,ie)|0,_=_+Math.imul(Pt,se)|0,b=b+Math.imul(Nt,oe)|0,h=h+Math.imul(Nt,ae)|0,h=h+Math.imul(Lt,oe)|0,_=_+Math.imul(Lt,ae)|0,b=b+Math.imul(lt,ce)|0,h=h+Math.imul(lt,ue)|0,h=h+Math.imul(Bt,ce)|0,_=_+Math.imul(Bt,ue)|0;var ti=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ti>>>26)|0,ti&=67108863,b=Math.imul(L,Vt),h=Math.imul(L,Zt),h=h+Math.imul(N,Vt)|0,_=Math.imul(N,Zt),b=b+Math.imul(u,Xt)|0,h=h+Math.imul(u,Yt)|0,h=h+Math.imul(m,Xt)|0,_=_+Math.imul(m,Yt)|0,b=b+Math.imul(qt,Jt)|0,h=h+Math.imul(qt,Qt)|0,h=h+Math.imul(p,Jt)|0,_=_+Math.imul(p,Qt)|0,b=b+Math.imul(Mt,te)|0,h=h+Math.imul(Mt,ee)|0,h=h+Math.imul(zt,te)|0,_=_+Math.imul(zt,ee)|0,b=b+Math.imul(Ut,re)|0,h=h+Math.imul(Ut,ne)|0,h=h+Math.imul(At,re)|0,_=_+Math.imul(At,ne)|0,b=b+Math.imul(kt,ie)|0,h=h+Math.imul(kt,se)|0,h=h+Math.imul(Dt,ie)|0,_=_+Math.imul(Dt,se)|0,b=b+Math.imul(Et,oe)|0,h=h+Math.imul(Et,ae)|0,h=h+Math.imul(Pt,oe)|0,_=_+Math.imul(Pt,ae)|0,b=b+Math.imul(Nt,ce)|0,h=h+Math.imul(Nt,ue)|0,h=h+Math.imul(Lt,ce)|0,_=_+Math.imul(Lt,ue)|0;var ei=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ei>>>26)|0,ei&=67108863,b=Math.imul(L,Xt),h=Math.imul(L,Yt),h=h+Math.imul(N,Xt)|0,_=Math.imul(N,Yt),b=b+Math.imul(u,Jt)|0,h=h+Math.imul(u,Qt)|0,h=h+Math.imul(m,Jt)|0,_=_+Math.imul(m,Qt)|0,b=b+Math.imul(qt,te)|0,h=h+Math.imul(qt,ee)|0,h=h+Math.imul(p,te)|0,_=_+Math.imul(p,ee)|0,b=b+Math.imul(Mt,re)|0,h=h+Math.imul(Mt,ne)|0,h=h+Math.imul(zt,re)|0,_=_+Math.imul(zt,ne)|0,b=b+Math.imul(Ut,ie)|0,h=h+Math.imul(Ut,se)|0,h=h+Math.imul(At,ie)|0,_=_+Math.imul(At,se)|0,b=b+Math.imul(kt,oe)|0,h=h+Math.imul(kt,ae)|0,h=h+Math.imul(Dt,oe)|0,_=_+Math.imul(Dt,ae)|0,b=b+Math.imul(Et,ce)|0,h=h+Math.imul(Et,ue)|0,h=h+Math.imul(Pt,ce)|0,_=_+Math.imul(Pt,ue)|0;var ri=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ri>>>26)|0,ri&=67108863,b=Math.imul(L,Jt),h=Math.imul(L,Qt),h=h+Math.imul(N,Jt)|0,_=Math.imul(N,Qt),b=b+Math.imul(u,te)|0,h=h+Math.imul(u,ee)|0,h=h+Math.imul(m,te)|0,_=_+Math.imul(m,ee)|0,b=b+Math.imul(qt,re)|0,h=h+Math.imul(qt,ne)|0,h=h+Math.imul(p,re)|0,_=_+Math.imul(p,ne)|0,b=b+Math.imul(Mt,ie)|0,h=h+Math.imul(Mt,se)|0,h=h+Math.imul(zt,ie)|0,_=_+Math.imul(zt,se)|0,b=b+Math.imul(Ut,oe)|0,h=h+Math.imul(Ut,ae)|0,h=h+Math.imul(At,oe)|0,_=_+Math.imul(At,ae)|0,b=b+Math.imul(kt,ce)|0,h=h+Math.imul(kt,ue)|0,h=h+Math.imul(Dt,ce)|0,_=_+Math.imul(Dt,ue)|0;var ni=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ni>>>26)|0,ni&=67108863,b=Math.imul(L,te),h=Math.imul(L,ee),h=h+Math.imul(N,te)|0,_=Math.imul(N,ee),b=b+Math.imul(u,re)|0,h=h+Math.imul(u,ne)|0,h=h+Math.imul(m,re)|0,_=_+Math.imul(m,ne)|0,b=b+Math.imul(qt,ie)|0,h=h+Math.imul(qt,se)|0,h=h+Math.imul(p,ie)|0,_=_+Math.imul(p,se)|0,b=b+Math.imul(Mt,oe)|0,h=h+Math.imul(Mt,ae)|0,h=h+Math.imul(zt,oe)|0,_=_+Math.imul(zt,ae)|0,b=b+Math.imul(Ut,ce)|0,h=h+Math.imul(Ut,ue)|0,h=h+Math.imul(At,ce)|0,_=_+Math.imul(At,ue)|0;var ii=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ii>>>26)|0,ii&=67108863,b=Math.imul(L,re),h=Math.imul(L,ne),h=h+Math.imul(N,re)|0,_=Math.imul(N,ne),b=b+Math.imul(u,ie)|0,h=h+Math.imul(u,se)|0,h=h+Math.imul(m,ie)|0,_=_+Math.imul(m,se)|0,b=b+Math.imul(qt,oe)|0,h=h+Math.imul(qt,ae)|0,h=h+Math.imul(p,oe)|0,_=_+Math.imul(p,ae)|0,b=b+Math.imul(Mt,ce)|0,h=h+Math.imul(Mt,ue)|0,h=h+Math.imul(zt,ce)|0,_=_+Math.imul(zt,ue)|0;var si=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(si>>>26)|0,si&=67108863,b=Math.imul(L,ie),h=Math.imul(L,se),h=h+Math.imul(N,ie)|0,_=Math.imul(N,se),b=b+Math.imul(u,oe)|0,h=h+Math.imul(u,ae)|0,h=h+Math.imul(m,oe)|0,_=_+Math.imul(m,ae)|0,b=b+Math.imul(qt,ce)|0,h=h+Math.imul(qt,ue)|0,h=h+Math.imul(p,ce)|0,_=_+Math.imul(p,ue)|0;var oi=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(oi>>>26)|0,oi&=67108863,b=Math.imul(L,oe),h=Math.imul(L,ae),h=h+Math.imul(N,oe)|0,_=Math.imul(N,ae),b=b+Math.imul(u,ce)|0,h=h+Math.imul(u,ue)|0,h=h+Math.imul(m,ce)|0,_=_+Math.imul(m,ue)|0;var ai=(T+b|0)+((h&8191)<<13)|0;T=(_+(h>>>13)|0)+(ai>>>26)|0,ai&=67108863,b=Math.imul(L,ce),h=Math.imul(L,ue),h=h+Math.imul(N,ce)|0,_=Math.imul(N,ue);var ci=(T+b|0)+((h&8191)<<13)|0;return T=(_+(h>>>13)|0)+(ci>>>26)|0,ci&=67108863,B[0]=Kn,B[1]=Wn,B[2]=Gn,B[3]=jn,B[4]=Vn,B[5]=Zn,B[6]=Xn,B[7]=Yn,B[8]=Jn,B[9]=Qn,B[10]=ti,B[11]=ei,B[12]=ri,B[13]=ni,B[14]=ii,B[15]=si,B[16]=oi,B[17]=ai,B[18]=ci,T!==0&&(B[19]=T,g.length++),g};Math.imul||(P=z);function C(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var g=0,w=0,x=0;x<l.length-1;x++){var B=w;w=0;for(var T=g&67108863,b=Math.min(x,o.length-1),h=Math.max(0,x-y.length+1);h<=b;h++){var _=x-h,X=y.words[_]|0,et=o.words[h]|0,nt=X*et,Tt=nt&67108863;B=B+(nt/67108864|0)|0,Tt=Tt+T|0,T=Tt&67108863,B=B+(Tt>>>26)|0,w+=B>>>26,B&=67108863}l.words[x]=T,g=B,B=w}return g!==0?l.words[x]=g:l.length--,l._strip()}function $(y,o,l){return C(y,o,l)}i.prototype.mulTo=function(o,l){var g,w=this.length+o.length;return this.length===10&&o.length===10?g=P(this,o,l):w<63?g=z(this,o,l):w<1024?g=C(this,o,l):g=$(this,o,l),g},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),$(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var l=o<0;l&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var g=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*o,B=(x&67108863)+(g&67108863);g>>=26,g+=x/67108864|0,g+=B>>>26,this.words[w]=B&67108863}return g!==0&&(this.words[w]=g,this.length++),l?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=U(o);if(l.length===0)return new i(1);for(var g=this,w=0;w<l.length&&l[w]===0;w++,g=g.sqr());if(++w<l.length)for(var x=g.sqr();w<l.length;w++,x=x.sqr())l[w]!==0&&(g=g.mul(x));return g},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26,w=67108863>>>26-l<<26-l,x;if(l!==0){var B=0;for(x=0;x<this.length;x++){var T=this.words[x]&w,b=(this.words[x]|0)-T<<l;this.words[x]=b|B,B=T>>>26-l}B&&(this.words[x]=B,this.length++)}if(g!==0){for(x=this.length-1;x>=0;x--)this.words[x+g]=this.words[x];for(x=0;x<g;x++)this.words[x]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,g){r(typeof o=="number"&&o>=0);var w;l?w=(l-l%26)/26:w=0;var x=o%26,B=Math.min((o-x)/26,this.length),T=67108863^67108863>>>x<<x,b=g;if(w-=B,w=Math.max(0,w),b){for(var h=0;h<B;h++)b.words[h]=this.words[h];b.length=B}if(B!==0)if(this.length>B)for(this.length-=B,h=0;h<this.length;h++)this.words[h]=this.words[h+B];else this.words[0]=0,this.length=1;var _=0;for(h=this.length-1;h>=0&&(_!==0||h>=w);h--){var X=this.words[h]|0;this.words[h]=_<<26-x|X>>>x,_=X&T}return b&&_!==0&&(b.words[b.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,l,g){return r(this.negative===0),this.iushrn(o,l,g)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26,w=1<<l;if(this.length<=g)return!1;var x=this.words[g];return!!(x&w)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var w=67108863^67108863>>>l<<l;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,g){var w=o.length+g,x;this._expand(w);var B,T=0;for(x=0;x<o.length;x++){B=(this.words[x+g]|0)+T;var b=(o.words[x]|0)*l;B-=b&67108863,T=(B>>26)-(b/67108864|0),this.words[x+g]=B&67108863}for(;x<this.length-g;x++)B=(this.words[x+g]|0)+T,T=B>>26,this.words[x+g]=B&67108863;if(T===0)return this._strip();for(r(T===-1),T=0,x=0;x<this.length;x++)B=-(this.words[x]|0)+T,T=B>>26,this.words[x]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,l){var g=this.length-o.length,w=this.clone(),x=o,B=x.words[x.length-1]|0,T=this._countBits(B);g=26-T,g!==0&&(x=x.ushln(g),w.iushln(g),B=x.words[x.length-1]|0);var b=w.length-x.length,h;if(l!=="mod"){h=new i(null),h.length=b+1,h.words=new Array(h.length);for(var _=0;_<h.length;_++)h.words[_]=0}var X=w.clone()._ishlnsubmul(x,1,b);X.negative===0&&(w=X,h&&(h.words[b]=1));for(var et=b-1;et>=0;et--){var nt=(w.words[x.length+et]|0)*67108864+(w.words[x.length+et-1]|0);for(nt=Math.min(nt/B|0,67108863),w._ishlnsubmul(x,nt,et);w.negative!==0;)nt--,w.negative=0,w._ishlnsubmul(x,1,et),w.isZero()||(w.negative^=1);h&&(h.words[et]=nt)}return h&&h._strip(),w._strip(),l!=="div"&&g!==0&&w.iushrn(g),{div:h||null,mod:w}},i.prototype.divmod=function(o,l,g){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,x,B;return this.negative!==0&&o.negative===0?(B=this.neg().divmod(o,l),l!=="mod"&&(w=B.div.neg()),l!=="div"&&(x=B.mod.neg(),g&&x.negative!==0&&x.iadd(o)),{div:w,mod:x}):this.negative===0&&o.negative!==0?(B=this.divmod(o.neg(),l),l!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):(this.negative&o.negative)!==0?(B=this.neg().divmod(o.neg(),l),l!=="div"&&(x=B.mod.neg(),g&&x.negative!==0&&x.isub(o)),{div:B.div,mod:x}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(o):l.mod,w=o.ushrn(1),x=o.andln(1),B=g.cmp(w);return B<0||x===1&&B===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(o){var l=o<0;l&&(o=-o),r(o<=67108863);for(var g=(1<<26)%o,w=0,x=this.length-1;x>=0;x--)w=(g*w+(this.words[x]|0))%o;return l?-w:w},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var l=o<0;l&&(o=-o),r(o<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+g*67108864;this.words[w]=x/o|0,g=x%o}return this._strip(),l?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var l=this,g=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var w=new i(1),x=new i(0),B=new i(0),T=new i(1),b=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++b;for(var h=g.clone(),_=l.clone();!l.isZero();){for(var X=0,et=1;(l.words[0]&et)===0&&X<26;++X,et<<=1);if(X>0)for(l.iushrn(X);X-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(h),x.isub(_)),w.iushrn(1),x.iushrn(1);for(var nt=0,Tt=1;(g.words[0]&Tt)===0&&nt<26;++nt,Tt<<=1);if(nt>0)for(g.iushrn(nt);nt-- >0;)(B.isOdd()||T.isOdd())&&(B.iadd(h),T.isub(_)),B.iushrn(1),T.iushrn(1);l.cmp(g)>=0?(l.isub(g),w.isub(B),x.isub(T)):(g.isub(l),B.isub(w),T.isub(x))}return{a:B,b:T,gcd:g.iushln(b)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var l=this,g=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var w=new i(1),x=new i(0),B=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var T=0,b=1;(l.words[0]&b)===0&&T<26;++T,b<<=1);if(T>0)for(l.iushrn(T);T-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var h=0,_=1;(g.words[0]&_)===0&&h<26;++h,_<<=1);if(h>0)for(g.iushrn(h);h-- >0;)x.isOdd()&&x.iadd(B),x.iushrn(1);l.cmp(g)>=0?(l.isub(g),w.isub(x)):(g.isub(l),x.isub(w))}var X;return l.cmpn(1)===0?X=w:X=x,X.cmpn(0)<0&&X.iadd(o),X},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),g=o.clone();l.negative=0,g.negative=0;for(var w=0;l.isEven()&&g.isEven();w++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var x=l.cmp(g);if(x<0){var B=l;l=g,g=B}else if(x===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(w)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var l=o%26,g=(o-l)/26,w=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var x=w,B=g;x!==0&&B<this.length;B++){var T=this.words[B]|0;T+=x,x=T>>>26,T&=67108863,this.words[B]=T}return x!==0&&(this.words[B]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var g;if(this.length>1)g=1;else{l&&(o=-o),r(o<=67108863,"Number is too big");var w=this.words[0]|0;g=w===o?0:w<o?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,x=o.words[g]|0;if(w!==x){w<x?l=-1:w>x&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new pt(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var D={k256:null,p224:null,p192:null,p25519:null};function K(y,o){this.name=y,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}K.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},K.prototype.ireduce=function(o){var l=o,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var w=g<this.n?-1:l.ucmp(this.p);return w===0?(l.words[0]=0,l.length=1):w>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},K.prototype.split=function(o,l){o.iushrn(this.n,0,l)},K.prototype.imulK=function(o){return o.imul(this.k)};function W(){K.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(W,K),W.prototype.split=function(o,l){for(var g=4194303,w=Math.min(o.length,9),x=0;x<w;x++)l.words[x]=o.words[x];if(l.length=w,o.length<=9){o.words[0]=0,o.length=1;return}var B=o.words[9];for(l.words[l.length++]=B&g,x=10;x<o.length;x++){var T=o.words[x]|0;o.words[x-10]=(T&g)<<4|B>>>22,B=T}B>>>=22,o.words[x-10]=B,B===0&&o.length>10?o.length-=10:o.length-=9},W.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,g=0;g<o.length;g++){var w=o.words[g]|0;l+=w*977,o.words[g]=l&67108863,l=w*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function V(){K.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(V,K);function mt(){K.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(mt,K);function Ot(){K.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Ot,K),Ot.prototype.imulK=function(o){for(var l=0,g=0;g<o.length;g++){var w=(o.words[g]|0)*19+l,x=w&67108863;w>>>=26,o.words[g]=x,l=w}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(D[o])return D[o];var l;if(o==="k256")l=new W;else if(o==="p224")l=new V;else if(o==="p192")l=new mt;else if(o==="p25519")l=new Ot;else throw new Error("Unknown prime "+o);return D[o]=l,l};function pt(y){if(typeof y=="string"){var o=i._prime(y);this.m=o.p,this.prime=o}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}pt.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},pt.prototype._verify2=function(o,l){r((o.negative|l.negative)===0,"red works only with positives"),r(o.red&&o.red===l.red,"red works only with red numbers")},pt.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(S(o,o.umod(this.m)._forceRed(this)),o)},pt.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},pt.prototype.add=function(o,l){this._verify2(o,l);var g=o.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},pt.prototype.iadd=function(o,l){this._verify2(o,l);var g=o.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},pt.prototype.sub=function(o,l){this._verify2(o,l);var g=o.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},pt.prototype.isub=function(o,l){this._verify2(o,l);var g=o.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},pt.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},pt.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},pt.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},pt.prototype.isqr=function(o){return this.imul(o,o.clone())},pt.prototype.sqr=function(o){return this.mul(o,o)},pt.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(o,g)}for(var w=this.m.subn(1),x=0;!w.isZero()&&w.andln(1)===0;)x++,w.iushrn(1);r(!w.isZero());var B=new i(1).toRed(this),T=B.redNeg(),b=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,b).cmp(T)!==0;)h.redIAdd(T);for(var _=this.pow(h,w),X=this.pow(o,w.addn(1).iushrn(1)),et=this.pow(o,w),nt=x;et.cmp(B)!==0;){for(var Tt=et,lt=0;Tt.cmp(B)!==0;lt++)Tt=Tt.redSqr();r(lt<nt);var Bt=this.pow(_,new i(1).iushln(nt-lt-1));X=X.redMul(Bt),_=Bt.redSqr(),et=et.redMul(_),nt=lt}return X},pt.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},pt.prototype.pow=function(o,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return o.clone();var g=4,w=new Array(1<<g);w[0]=new i(1).toRed(this),w[1]=o;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],o);var B=w[0],T=0,b=0,h=l.bitLength()%26;for(h===0&&(h=26),x=l.length-1;x>=0;x--){for(var _=l.words[x],X=h-1;X>=0;X--){var et=_>>X&1;if(B!==w[0]&&(B=this.sqr(B)),et===0&&T===0){b=0;continue}T<<=1,T|=et,b++,!(b!==g&&(x!==0||X!==0))&&(B=this.mul(B,w[T]),b=0,T=0)}h=26}return B},pt.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},pt.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new Ft(o)};function Ft(y){pt.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Ft,pt),Ft.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Ft.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Ft.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var g=o.imul(l),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=g.isub(w).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},Ft.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var g=o.mul(l),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=g.isub(w).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},Ft.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,ze)})(Di);var ms=Di.exports,pn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=ht,r=e.Buffer;function s(a,f){for(var d in a)f[d]=a[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(a,f,d){return r(a,f,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(a,f,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,f,d)},i.alloc=function(a,f,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var v=r(a);return f!==void 0?typeof d=="string"?v.fill(f,d):v.fill(f):v.fill(0),v},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}})(pn,pn.exports);const nc=(n,t,e)=>n&t^~n&e,ic=(n,t,e)=>n&t^n&e^t&e,sc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint32Array(64);class oc extends Ks{constructor(){super(64,32,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:a,G:f,H:d}=this;return[t,e,r,s,i,a,f,d]}set(t,e,r,s,i,a,f,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=f|0,this.H=d|0}process(t,e){for(let A=0;A<16;A++,e+=4)rr[A]=t.getUint32(e,!1);for(let A=16;A<64;A++){const M=rr[A-15],E=rr[A-2],R=He(M,7)^He(M,18)^M>>>3,k=He(E,17)^He(E,19)^E>>>10;rr[A]=k+rr[A-7]+R+rr[A-16]|0}let{A:r,B:s,C:i,D:a,E:f,F:d,G:v,H:S}=this;for(let A=0;A<64;A++){const M=He(f,6)^He(f,11)^He(f,25),E=S+M+nc(f,d,v)+sc[A]+rr[A]|0,k=(He(r,2)^He(r,13)^He(r,22))+ic(r,s,i)|0;S=v,v=d,d=f,f=a+E|0,a=i,i=s,s=r,r=E+k|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,f=f+this.E|0,d=d+this.F|0,v=v+this.G|0,S=S+this.H|0,this.set(r,s,i,a,f,d,v,S)}roundClean(){rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ws=$r(()=>new oc);var ye={},tn=pn.exports.Buffer;function ac(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var a=n.length,f=n.charAt(0),d=Math.log(a)/Math.log(256),v=Math.log(256)/Math.log(a);function S(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=tn.from(E)),!tn.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var R=0,k=0,U=0,z=E.length;U!==z&&E[U]===0;)U++,R++;for(var P=(z-U)*v+1>>>0,C=new Uint8Array(P);U!==z;){for(var $=E[U],D=0,K=P-1;($!==0||D<k)&&K!==-1;K--,D++)$+=256*C[K]>>>0,C[K]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=D,U++}for(var W=P-k;W!==P&&C[W]===0;)W++;for(var V=f.repeat(R);W<P;++W)V+=n.charAt(C[W]);return V}function A(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return tn.alloc(0);for(var R=0,k=0,U=0;E[R]===f;)k++,R++;for(var z=(E.length-R)*d+1>>>0,P=new Uint8Array(z);E[R];){var C=t[E.charCodeAt(R)];if(C===255)return;for(var $=0,D=z-1;(C!==0||$<U)&&D!==-1;D--,$++)C+=a*P[D]>>>0,P[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");U=$,R++}for(var K=z-U;K!==z&&P[K]===0;)K++;var W=tn.allocUnsafe(k+(z-K));W.fill(0,0,k);for(var V=k;K!==z;)W[V++]=P[K++];return W}function M(E){var R=A(E);if(R)return R;throw new Error("Non-base"+a+" character")}return{encode:S,decodeUnsafe:A,decode:M}}var cc=ac,uc=cc,fc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",hc=uc(fc);function Ze(n,t,e){return t<=n&&n<=e}function In(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function lc(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var f=i&1023,d=a&1023;s.push(65536+(f<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function dc(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var gn=-1;function zi(n){this.tokens=[].slice.call(n)}zi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():gn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Er=-1;function di(n,t){if(n)throw TypeError("Decoder error");return t||65533}var yn="utf-8";function mn(n,t){if(!(this instanceof mn))return new mn(n,t);if(n=n!==void 0?String(n).toLowerCase():yn,n!==yn)throw new Error("Encoding not supported. Only utf-8 is supported");t=In(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}mn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=In(e),this._streaming||(this._decoder=new pc({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var s=new zi(r),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==Er);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===Er)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),dc(i)}};function wn(n,t){if(!(this instanceof wn))return new wn(n,t);if(n=n!==void 0?String(n).toLowerCase():yn,n!==yn)throw new Error("Encoding not supported. Only utf-8 is supported");t=In(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}wn.prototype={encode:function(t,e){t=t?String(t):"",e=In(e),this._streaming||(this._encoder=new gc(this._options)),this._streaming=Boolean(e.stream);for(var r=[],s=new zi(lc(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Er);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Er;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function pc(n){var t=n.fatal,e=0,r=0,s=0,i=128,a=191;this.handler=function(f,d){if(d===gn&&s!==0)return s=0,di(t);if(d===gn)return Er;if(s===0){if(Ze(d,0,127))return d;if(Ze(d,194,223))s=1,e=d-192;else if(Ze(d,224,239))d===224&&(i=160),d===237&&(a=159),s=2,e=d-224;else if(Ze(d,240,244))d===240&&(i=144),d===244&&(a=143),s=3,e=d-240;else return di(t);return e=e<<6*s,null}if(!Ze(d,i,a))return e=s=r=0,i=128,a=191,f.prepend(d),di(t);if(i=128,a=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var v=e;return e=s=r=0,v}}function gc(n){n.fatal,this.handler=function(t,e){if(e===gn)return Er;if(Ze(e,0,127))return e;var r,s;Ze(e,128,2047)?(r=1,s=192):Ze(e,2048,65535)?(r=2,s=224):Ze(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}var yc=Object.freeze(Object.defineProperty({__proto__:null,TextEncoder:wn,TextDecoder:mn},Symbol.toStringTag,{value:"Module"})),mc=qs(yc),wc=ze&&ze.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),bc=ze&&ze.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ke=ze&&ze.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var f=n.length-1;f>=0;f--)(a=n[f])&&(i=(s<3?a(i):s>3?a(t,e,i):a(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},vc=ze&&ze.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&wc(t,n,e);return bc(t,n),t},Qs=ze&&ze.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ye,"__esModule",{value:!0});var to=ye.deserializeUnchecked=oo=ye.deserialize=so=ye.serialize=ye.BinaryReader=ye.BinaryWriter=ye.BorshError=ye.baseDecode=ye.baseEncode=void 0;const or=Qs(Di.exports),eo=Qs(hc),xc=vc(mc),_c=typeof TextDecoder!="function"?xc.TextDecoder:TextDecoder,Sc=new _c("utf-8",{fatal:!0});function Bc(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),eo.default.encode(Buffer.from(n))}ye.baseEncode=Bc;function Ec(n){return Buffer.from(eo.default.decode(n))}ye.baseDecode=Ec;const pi=1024;class Ee extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ye.BorshError=Ee;class ro{constructor(){this.buf=Buffer.alloc(pi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(pi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new or.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new or.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new or.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new or.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(pi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ye.BinaryWriter=ro;function We(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const a=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new Ee("Reached the end of buffer when deserializing")}throw i}}}class Te{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new or.default(t,"le")}readU128(){const t=this.readBuffer(16);return new or.default(t,"le")}readU256(){const t=this.readBuffer(32);return new or.default(t,"le")}readU512(){const t=this.readBuffer(64);return new or.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ee(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Sc.decode(e)}catch(r){throw new Ee(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}Ke([We],Te.prototype,"readU8",null);Ke([We],Te.prototype,"readU16",null);Ke([We],Te.prototype,"readU32",null);Ke([We],Te.prototype,"readU64",null);Ke([We],Te.prototype,"readU128",null);Ke([We],Te.prototype,"readU256",null);Ke([We],Te.prototype,"readU512",null);Ke([We],Te.prototype,"readString",null);Ke([We],Te.prototype,"readFixedArray",null);Ke([We],Te.prototype,"readArray",null);ye.BinaryReader=Te;function no(n){return n.charAt(0).toUpperCase()+n.slice(1)}function lr(n,t,e,r,s){try{if(typeof r=="string")s[`write${no(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Ee(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Ee(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)lr(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{lr(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),lr(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,a)=>{lr(n,t,a,r.key,s),lr(n,t,i,r.value,s)});break}default:throw new Ee(`FieldType ${r} unrecognized`)}else io(n,e,s)}catch(i){throw i instanceof Ee&&i.addToFieldPath(t),i}}function io(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Ee(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{lr(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[a,f]=r.values[i];if(a===s){e.writeU8(i),lr(n,a,t[a],f,e);break}}}else throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ac(n,t,e=ro){const r=new e;return io(n,t,r),r.toArray()}var so=ye.serialize=Ac;function dr(n,t,e,r){try{if(typeof e=="string")return r[`read${no(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(dr(n,null,e[0],r));return s}else return r.readArray(()=>dr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?dr(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let a=0;a<i;a++){const f=dr(n,t,e.key,r),d=dr(n,t,e.value,r);s.set(f,d)}return s}return qi(n,e,r)}catch(s){throw s instanceof Ee&&s.addToFieldPath(t),s}}function qi(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Ee(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,a]of n.get(t).fields)s[i]=dr(n,i,a,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new Ee(`Enum index: ${s} is out of range`);const[i,a]=r.values[s],f=dr(n,i,a,e);return new t({[i]:f})}throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ic(n,t,e,r=Te){const s=new r(e),i=qi(n,t,s);if(s.offset<e.length)throw new Ee(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var oo=ye.deserialize=Ic;function kc(n,t,e,r=Te){const s=new r(e);return qi(n,t,s)}to=ye.deserializeUnchecked=kc;var O={},ao={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=ia,e=sa,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=f,n.SlowBuffer=P,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,f.TYPED_ARRAY_SUPPORT=i(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const p=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(p,c),p.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.byteOffset}});function a(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const c=new Uint8Array(p);return Object.setPrototypeOf(c,f.prototype),c}function f(p,c,u){if(typeof p=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(p)}return d(p,c,u)}f.poolSize=8192;function d(p,c,u){if(typeof p=="string")return M(p,c);if(ArrayBuffer.isView(p))return R(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Me(p,ArrayBuffer)||p&&Me(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Me(p,SharedArrayBuffer)||p&&Me(p.buffer,SharedArrayBuffer)))return k(p,c,u);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=p.valueOf&&p.valueOf();if(m!=null&&m!==p)return f.from(m,c,u);const I=U(p);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return f.from(p[Symbol.toPrimitive]("string"),c,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}f.from=function(p,c,u){return d(p,c,u)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function v(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function S(p,c,u){return v(p),p<=0?a(p):c!==void 0?typeof u=="string"?a(p).fill(c,u):a(p).fill(c):a(p)}f.alloc=function(p,c,u){return S(p,c,u)};function A(p){return v(p),a(p<0?0:z(p)|0)}f.allocUnsafe=function(p){return A(p)},f.allocUnsafeSlow=function(p){return A(p)};function M(p,c){if((typeof c!="string"||c==="")&&(c="utf8"),!f.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const u=C(p,c)|0;let m=a(u);const I=m.write(p,c);return I!==u&&(m=m.slice(0,I)),m}function E(p){const c=p.length<0?0:z(p.length)|0,u=a(c);for(let m=0;m<c;m+=1)u[m]=p[m]&255;return u}function R(p){if(Me(p,Uint8Array)){const c=new Uint8Array(p);return k(c.buffer,c.byteOffset,c.byteLength)}return E(p)}function k(p,c,u){if(c<0||p.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<c+(u||0))throw new RangeError('"length" is outside of buffer bounds');let m;return c===void 0&&u===void 0?m=new Uint8Array(p):u===void 0?m=new Uint8Array(p,c):m=new Uint8Array(p,c,u),Object.setPrototypeOf(m,f.prototype),m}function U(p){if(f.isBuffer(p)){const c=z(p.length)|0,u=a(c);return u.length===0||p.copy(u,0,0,c),u}if(p.length!==void 0)return typeof p.length!="number"||Mt(p.length)?a(0):E(p);if(p.type==="Buffer"&&Array.isArray(p.data))return E(p.data)}function z(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function P(p){return+p!=p&&(p=0),f.alloc(+p)}f.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==f.prototype},f.compare=function(c,u){if(Me(c,Uint8Array)&&(c=f.from(c,c.offset,c.byteLength)),Me(u,Uint8Array)&&(u=f.from(u,u.offset,u.byteLength)),!f.isBuffer(c)||!f.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===u)return 0;let m=c.length,I=u.length;for(let L=0,N=Math.min(m,I);L<N;++L)if(c[L]!==u[L]){m=c[L],I=u[L];break}return m<I?-1:I<m?1:0},f.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(c,u){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return f.alloc(0);let m;if(u===void 0)for(u=0,m=0;m<c.length;++m)u+=c[m].length;const I=f.allocUnsafe(u);let L=0;for(m=0;m<c.length;++m){let N=c[m];if(Me(N,Uint8Array))L+N.length>I.length?(f.isBuffer(N)||(N=f.from(N)),N.copy(I,L)):Uint8Array.prototype.set.call(I,N,L);else if(f.isBuffer(N))N.copy(I,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=N.length}return I};function C(p,c){if(f.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Me(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const u=p.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&u===0)return 0;let I=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return kt(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ut(p).length;default:if(I)return m?-1:kt(p).length;c=(""+c).toLowerCase(),I=!0}}f.byteLength=C;function $(p,c,u){let m=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,c>>>=0,u<=c))return"";for(p||(p="utf8");;)switch(p){case"hex":return B(this,c,u);case"utf8":case"utf-8":return o(this,c,u);case"ascii":return w(this,c,u);case"latin1":case"binary":return x(this,c,u);case"base64":return y(this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,c,u);default:if(m)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),m=!0}}f.prototype._isBuffer=!0;function D(p,c,u){const m=p[c];p[c]=p[u],p[u]=m}f.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<c;u+=2)D(this,u,u+1);return this},f.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<c;u+=4)D(this,u,u+3),D(this,u+1,u+2);return this},f.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<c;u+=8)D(this,u,u+7),D(this,u+1,u+6),D(this,u+2,u+5),D(this,u+3,u+4);return this},f.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?o(this,0,c):$.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(c){if(!f.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:f.compare(this,c)===0},f.prototype.inspect=function(){let c="";const u=n.INSPECT_MAX_BYTES;return c=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(c+=" ... "),"<Buffer "+c+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(c,u,m,I,L){if(Me(c,Uint8Array)&&(c=f.from(c,c.offset,c.byteLength)),!f.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(u===void 0&&(u=0),m===void 0&&(m=c?c.length:0),I===void 0&&(I=0),L===void 0&&(L=this.length),u<0||m>c.length||I<0||L>this.length)throw new RangeError("out of range index");if(I>=L&&u>=m)return 0;if(I>=L)return-1;if(u>=m)return 1;if(u>>>=0,m>>>=0,I>>>=0,L>>>=0,this===c)return 0;let N=L-I,ut=m-u;const ct=Math.min(N,ut),ot=this.slice(I,L),It=c.slice(u,m);for(let it=0;it<ct;++it)if(ot[it]!==It[it]){N=ot[it],ut=It[it];break}return N<ut?-1:ut<N?1:0};function K(p,c,u,m,I){if(p.length===0)return-1;if(typeof u=="string"?(m=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,Mt(u)&&(u=I?0:p.length-1),u<0&&(u=p.length+u),u>=p.length){if(I)return-1;u=p.length-1}else if(u<0)if(I)u=0;else return-1;if(typeof c=="string"&&(c=f.from(c,m)),f.isBuffer(c))return c.length===0?-1:W(p,c,u,m,I);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(p,c,u):Uint8Array.prototype.lastIndexOf.call(p,c,u):W(p,[c],u,m,I);throw new TypeError("val must be string, number or Buffer")}function W(p,c,u,m,I){let L=1,N=p.length,ut=c.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(p.length<2||c.length<2)return-1;L=2,N/=2,ut/=2,u/=2}function ct(It,it){return L===1?It[it]:It.readUInt16BE(it*L)}let ot;if(I){let It=-1;for(ot=u;ot<N;ot++)if(ct(p,ot)===ct(c,It===-1?0:ot-It)){if(It===-1&&(It=ot),ot-It+1===ut)return It*L}else It!==-1&&(ot-=ot-It),It=-1}else for(u+ut>N&&(u=N-ut),ot=u;ot>=0;ot--){let It=!0;for(let it=0;it<ut;it++)if(ct(p,ot+it)!==ct(c,it)){It=!1;break}if(It)return ot}return-1}f.prototype.includes=function(c,u,m){return this.indexOf(c,u,m)!==-1},f.prototype.indexOf=function(c,u,m){return K(this,c,u,m,!0)},f.prototype.lastIndexOf=function(c,u,m){return K(this,c,u,m,!1)};function V(p,c,u,m){u=Number(u)||0;const I=p.length-u;m?(m=Number(m),m>I&&(m=I)):m=I;const L=c.length;m>L/2&&(m=L/2);let N;for(N=0;N<m;++N){const ut=parseInt(c.substr(N*2,2),16);if(Mt(ut))return N;p[u+N]=ut}return N}function mt(p,c,u,m){return At(kt(c,p.length-u),p,u,m)}function Ot(p,c,u,m){return At(Dt(c),p,u,m)}function pt(p,c,u,m){return At(Ut(c),p,u,m)}function Ft(p,c,u,m){return At(Jr(c,p.length-u),p,u,m)}f.prototype.write=function(c,u,m,I){if(u===void 0)I="utf8",m=this.length,u=0;else if(m===void 0&&typeof u=="string")I=u,m=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(m)?(m=m>>>0,I===void 0&&(I="utf8")):(I=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-u;if((m===void 0||m>L)&&(m=L),c.length>0&&(m<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let N=!1;for(;;)switch(I){case"hex":return V(this,c,u,m);case"utf8":case"utf-8":return mt(this,c,u,m);case"ascii":case"latin1":case"binary":return Ot(this,c,u,m);case"base64":return pt(this,c,u,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ft(this,c,u,m);default:if(N)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),N=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(p,c,u){return c===0&&u===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(c,u))}function o(p,c,u){u=Math.min(p.length,u);const m=[];let I=c;for(;I<u;){const L=p[I];let N=null,ut=L>239?4:L>223?3:L>191?2:1;if(I+ut<=u){let ct,ot,It,it;switch(ut){case 1:L<128&&(N=L);break;case 2:ct=p[I+1],(ct&192)===128&&(it=(L&31)<<6|ct&63,it>127&&(N=it));break;case 3:ct=p[I+1],ot=p[I+2],(ct&192)===128&&(ot&192)===128&&(it=(L&15)<<12|(ct&63)<<6|ot&63,it>2047&&(it<55296||it>57343)&&(N=it));break;case 4:ct=p[I+1],ot=p[I+2],It=p[I+3],(ct&192)===128&&(ot&192)===128&&(It&192)===128&&(it=(L&15)<<18|(ct&63)<<12|(ot&63)<<6|It&63,it>65535&&it<1114112&&(N=it))}}N===null?(N=65533,ut=1):N>65535&&(N-=65536,m.push(N>>>10&1023|55296),N=56320|N&1023),m.push(N),I+=ut}return g(m)}const l=4096;function g(p){const c=p.length;if(c<=l)return String.fromCharCode.apply(String,p);let u="",m=0;for(;m<c;)u+=String.fromCharCode.apply(String,p.slice(m,m+=l));return u}function w(p,c,u){let m="";u=Math.min(p.length,u);for(let I=c;I<u;++I)m+=String.fromCharCode(p[I]&127);return m}function x(p,c,u){let m="";u=Math.min(p.length,u);for(let I=c;I<u;++I)m+=String.fromCharCode(p[I]);return m}function B(p,c,u){const m=p.length;(!c||c<0)&&(c=0),(!u||u<0||u>m)&&(u=m);let I="";for(let L=c;L<u;++L)I+=zt[p[L]];return I}function T(p,c,u){const m=p.slice(c,u);let I="";for(let L=0;L<m.length-1;L+=2)I+=String.fromCharCode(m[L]+m[L+1]*256);return I}f.prototype.slice=function(c,u){const m=this.length;c=~~c,u=u===void 0?m:~~u,c<0?(c+=m,c<0&&(c=0)):c>m&&(c=m),u<0?(u+=m,u<0&&(u=0)):u>m&&(u=m),u<c&&(u=c);const I=this.subarray(c,u);return Object.setPrototypeOf(I,f.prototype),I};function b(p,c,u){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+c>u)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(c,u,m){c=c>>>0,u=u>>>0,m||b(c,u,this.length);let I=this[c],L=1,N=0;for(;++N<u&&(L*=256);)I+=this[c+N]*L;return I},f.prototype.readUintBE=f.prototype.readUIntBE=function(c,u,m){c=c>>>0,u=u>>>0,m||b(c,u,this.length);let I=this[c+--u],L=1;for(;u>0&&(L*=256);)I+=this[c+--u]*L;return I},f.prototype.readUint8=f.prototype.readUInt8=function(c,u){return c=c>>>0,u||b(c,1,this.length),this[c]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(c,u){return c=c>>>0,u||b(c,2,this.length),this[c]|this[c+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(c,u){return c=c>>>0,u||b(c,2,this.length),this[c]<<8|this[c+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(c,u){return c=c>>>0,u||b(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(c,u){return c=c>>>0,u||b(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},f.prototype.readBigUInt64LE=Pe(function(c){c=c>>>0,je(c,"offset");const u=this[c],m=this[c+7];(u===void 0||m===void 0)&&Et(c,this.length-8);const I=u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,L=this[++c]+this[++c]*2**8+this[++c]*2**16+m*2**24;return BigInt(I)+(BigInt(L)<<BigInt(32))}),f.prototype.readBigUInt64BE=Pe(function(c){c=c>>>0,je(c,"offset");const u=this[c],m=this[c+7];(u===void 0||m===void 0)&&Et(c,this.length-8);const I=u*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],L=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+m;return(BigInt(I)<<BigInt(32))+BigInt(L)}),f.prototype.readIntLE=function(c,u,m){c=c>>>0,u=u>>>0,m||b(c,u,this.length);let I=this[c],L=1,N=0;for(;++N<u&&(L*=256);)I+=this[c+N]*L;return L*=128,I>=L&&(I-=Math.pow(2,8*u)),I},f.prototype.readIntBE=function(c,u,m){c=c>>>0,u=u>>>0,m||b(c,u,this.length);let I=u,L=1,N=this[c+--I];for(;I>0&&(L*=256);)N+=this[c+--I]*L;return L*=128,N>=L&&(N-=Math.pow(2,8*u)),N},f.prototype.readInt8=function(c,u){return c=c>>>0,u||b(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},f.prototype.readInt16LE=function(c,u){c=c>>>0,u||b(c,2,this.length);const m=this[c]|this[c+1]<<8;return m&32768?m|4294901760:m},f.prototype.readInt16BE=function(c,u){c=c>>>0,u||b(c,2,this.length);const m=this[c+1]|this[c]<<8;return m&32768?m|4294901760:m},f.prototype.readInt32LE=function(c,u){return c=c>>>0,u||b(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},f.prototype.readInt32BE=function(c,u){return c=c>>>0,u||b(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},f.prototype.readBigInt64LE=Pe(function(c){c=c>>>0,je(c,"offset");const u=this[c],m=this[c+7];(u===void 0||m===void 0)&&Et(c,this.length-8);const I=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(m<<24);return(BigInt(I)<<BigInt(32))+BigInt(u+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),f.prototype.readBigInt64BE=Pe(function(c){c=c>>>0,je(c,"offset");const u=this[c],m=this[c+7];(u===void 0||m===void 0)&&Et(c,this.length-8);const I=(u<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(I)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+m)}),f.prototype.readFloatLE=function(c,u){return c=c>>>0,u||b(c,4,this.length),e.read(this,c,!0,23,4)},f.prototype.readFloatBE=function(c,u){return c=c>>>0,u||b(c,4,this.length),e.read(this,c,!1,23,4)},f.prototype.readDoubleLE=function(c,u){return c=c>>>0,u||b(c,8,this.length),e.read(this,c,!0,52,8)},f.prototype.readDoubleBE=function(c,u){return c=c>>>0,u||b(c,8,this.length),e.read(this,c,!1,52,8)};function h(p,c,u,m,I,L){if(!f.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>I||c<L)throw new RangeError('"value" argument is out of bounds');if(u+m>p.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(c,u,m,I){if(c=+c,u=u>>>0,m=m>>>0,!I){const ut=Math.pow(2,8*m)-1;h(this,c,u,m,ut,0)}let L=1,N=0;for(this[u]=c&255;++N<m&&(L*=256);)this[u+N]=c/L&255;return u+m},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(c,u,m,I){if(c=+c,u=u>>>0,m=m>>>0,!I){const ut=Math.pow(2,8*m)-1;h(this,c,u,m,ut,0)}let L=m-1,N=1;for(this[u+L]=c&255;--L>=0&&(N*=256);)this[u+L]=c/N&255;return u+m},f.prototype.writeUint8=f.prototype.writeUInt8=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,1,255,0),this[u]=c&255,u+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,2,65535,0),this[u]=c&255,this[u+1]=c>>>8,u+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,2,65535,0),this[u]=c>>>8,this[u+1]=c&255,u+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,4,4294967295,0),this[u+3]=c>>>24,this[u+2]=c>>>16,this[u+1]=c>>>8,this[u]=c&255,u+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,4,4294967295,0),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4};function _(p,c,u,m,I){Lt(c,m,I,p,u,7);let L=Number(c&BigInt(4294967295));p[u++]=L,L=L>>8,p[u++]=L,L=L>>8,p[u++]=L,L=L>>8,p[u++]=L;let N=Number(c>>BigInt(32)&BigInt(4294967295));return p[u++]=N,N=N>>8,p[u++]=N,N=N>>8,p[u++]=N,N=N>>8,p[u++]=N,u}function X(p,c,u,m,I){Lt(c,m,I,p,u,7);let L=Number(c&BigInt(4294967295));p[u+7]=L,L=L>>8,p[u+6]=L,L=L>>8,p[u+5]=L,L=L>>8,p[u+4]=L;let N=Number(c>>BigInt(32)&BigInt(4294967295));return p[u+3]=N,N=N>>8,p[u+2]=N,N=N>>8,p[u+1]=N,N=N>>8,p[u]=N,u+8}f.prototype.writeBigUInt64LE=Pe(function(c,u=0){return _(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Pe(function(c,u=0){return X(this,c,u,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(c,u,m,I){if(c=+c,u=u>>>0,!I){const ct=Math.pow(2,8*m-1);h(this,c,u,m,ct-1,-ct)}let L=0,N=1,ut=0;for(this[u]=c&255;++L<m&&(N*=256);)c<0&&ut===0&&this[u+L-1]!==0&&(ut=1),this[u+L]=(c/N>>0)-ut&255;return u+m},f.prototype.writeIntBE=function(c,u,m,I){if(c=+c,u=u>>>0,!I){const ct=Math.pow(2,8*m-1);h(this,c,u,m,ct-1,-ct)}let L=m-1,N=1,ut=0;for(this[u+L]=c&255;--L>=0&&(N*=256);)c<0&&ut===0&&this[u+L+1]!==0&&(ut=1),this[u+L]=(c/N>>0)-ut&255;return u+m},f.prototype.writeInt8=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,1,127,-128),c<0&&(c=255+c+1),this[u]=c&255,u+1},f.prototype.writeInt16LE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,2,32767,-32768),this[u]=c&255,this[u+1]=c>>>8,u+2},f.prototype.writeInt16BE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,2,32767,-32768),this[u]=c>>>8,this[u+1]=c&255,u+2},f.prototype.writeInt32LE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,4,2147483647,-2147483648),this[u]=c&255,this[u+1]=c>>>8,this[u+2]=c>>>16,this[u+3]=c>>>24,u+4},f.prototype.writeInt32BE=function(c,u,m){return c=+c,u=u>>>0,m||h(this,c,u,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[u]=c>>>24,this[u+1]=c>>>16,this[u+2]=c>>>8,this[u+3]=c&255,u+4},f.prototype.writeBigInt64LE=Pe(function(c,u=0){return _(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Pe(function(c,u=0){return X(this,c,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function et(p,c,u,m,I,L){if(u+m>p.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function nt(p,c,u,m,I){return c=+c,u=u>>>0,I||et(p,c,u,4),e.write(p,c,u,m,23,4),u+4}f.prototype.writeFloatLE=function(c,u,m){return nt(this,c,u,!0,m)},f.prototype.writeFloatBE=function(c,u,m){return nt(this,c,u,!1,m)};function Tt(p,c,u,m,I){return c=+c,u=u>>>0,I||et(p,c,u,8),e.write(p,c,u,m,52,8),u+8}f.prototype.writeDoubleLE=function(c,u,m){return Tt(this,c,u,!0,m)},f.prototype.writeDoubleBE=function(c,u,m){return Tt(this,c,u,!1,m)},f.prototype.copy=function(c,u,m,I){if(!f.isBuffer(c))throw new TypeError("argument should be a Buffer");if(m||(m=0),!I&&I!==0&&(I=this.length),u>=c.length&&(u=c.length),u||(u=0),I>0&&I<m&&(I=m),I===m||c.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),c.length-u<I-m&&(I=c.length-u+m);const L=I-m;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,m,I):Uint8Array.prototype.set.call(c,this.subarray(m,I),u),L},f.prototype.fill=function(c,u,m,I){if(typeof c=="string"){if(typeof u=="string"?(I=u,u=0,m=this.length):typeof m=="string"&&(I=m,m=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!f.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(c.length===1){const N=c.charCodeAt(0);(I==="utf8"&&N<128||I==="latin1")&&(c=N)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(u<0||this.length<u||this.length<m)throw new RangeError("Out of range index");if(m<=u)return this;u=u>>>0,m=m===void 0?this.length:m>>>0,c||(c=0);let L;if(typeof c=="number")for(L=u;L<m;++L)this[L]=c;else{const N=f.isBuffer(c)?c:f.from(c,I),ut=N.length;if(ut===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(L=0;L<m-u;++L)this[L+u]=N[L%ut]}return this};const lt={};function Bt(p,c,u){lt[p]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(p,c){return`The "${p}" argument must be of type number. Received type ${typeof c}`},TypeError),Bt("ERR_OUT_OF_RANGE",function(p,c,u){let m=`The value of "${p}" is out of range.`,I=u;return Number.isInteger(u)&&Math.abs(u)>2**32?I=Mr(String(u)):typeof u=="bigint"&&(I=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(I=Mr(I)),I+="n"),m+=` It must be ${c}. Received ${I}`,m},RangeError);function Mr(p){let c="",u=p.length;const m=p[0]==="-"?1:0;for(;u>=m+4;u-=3)c=`_${p.slice(u-3,u)}${c}`;return`${p.slice(0,u)}${c}`}function Nt(p,c,u){je(c,"offset"),(p[c]===void 0||p[c+u]===void 0)&&Et(c,p.length-(u+1))}function Lt(p,c,u,m,I,L){if(p>u||p<c){const N=typeof c=="bigint"?"n":"";let ut;throw L>3?c===0||c===BigInt(0)?ut=`>= 0${N} and < 2${N} ** ${(L+1)*8}${N}`:ut=`>= -(2${N} ** ${(L+1)*8-1}${N}) and < 2 ** ${(L+1)*8-1}${N}`:ut=`>= ${c}${N} and <= ${u}${N}`,new lt.ERR_OUT_OF_RANGE("value",ut,p)}Nt(m,I,L)}function je(p,c){if(typeof p!="number")throw new lt.ERR_INVALID_ARG_TYPE(c,"number",p)}function Et(p,c,u){throw Math.floor(p)!==p?(je(p,u),new lt.ERR_OUT_OF_RANGE(u||"offset","an integer",p)):c<0?new lt.ERR_BUFFER_OUT_OF_BOUNDS:new lt.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${c}`,p)}const Pt=/[^+/0-9A-Za-z-_]/g;function Yr(p){if(p=p.split("=")[0],p=p.trim().replace(Pt,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function kt(p,c){c=c||1/0;let u;const m=p.length;let I=null;const L=[];for(let N=0;N<m;++N){if(u=p.charCodeAt(N),u>55295&&u<57344){if(!I){if(u>56319){(c-=3)>-1&&L.push(239,191,189);continue}else if(N+1===m){(c-=3)>-1&&L.push(239,191,189);continue}I=u;continue}if(u<56320){(c-=3)>-1&&L.push(239,191,189),I=u;continue}u=(I-55296<<10|u-56320)+65536}else I&&(c-=3)>-1&&L.push(239,191,189);if(I=null,u<128){if((c-=1)<0)break;L.push(u)}else if(u<2048){if((c-=2)<0)break;L.push(u>>6|192,u&63|128)}else if(u<65536){if((c-=3)<0)break;L.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((c-=4)<0)break;L.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return L}function Dt(p){const c=[];for(let u=0;u<p.length;++u)c.push(p.charCodeAt(u)&255);return c}function Jr(p,c){let u,m,I;const L=[];for(let N=0;N<p.length&&!((c-=2)<0);++N)u=p.charCodeAt(N),m=u>>8,I=u%256,L.push(I),L.push(m);return L}function Ut(p){return t.toByteArray(Yr(p))}function At(p,c,u,m){let I;for(I=0;I<m&&!(I+u>=c.length||I>=p.length);++I)c[I+u]=p[I];return I}function Me(p,c){return p instanceof c||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===c.name}function Mt(p){return p!==p}const zt=function(){const p="0123456789abcdef",c=new Array(256);for(let u=0;u<16;++u){const m=u*16;for(let I=0;I<16;++I)c[m+I]=p[u]+p[I]}return c}();function Pe(p){return typeof BigInt>"u"?qt:p}function qt(){throw new Error("BigInt not supported")}})(ao);Object.defineProperty(O,"__esModule",{value:!0});O.s16=O.s8=O.nu64be=O.u48be=O.u40be=O.u32be=O.u24be=O.u16be=ge=O.nu64=O.u48=O.u40=rt=O.u32=O.u24=Ue=O.u16=vt=O.u8=pr=O.offset=O.greedy=O.Constant=O.UTF8=O.CString=O.Blob=O.Boolean=O.BitField=O.BitStructure=O.VariantLayout=O.Union=O.UnionLayoutDiscriminator=O.UnionDiscriminator=O.Structure=O.Sequence=O.DoubleBE=O.Double=O.FloatBE=O.Float=O.NearInt64BE=O.NearInt64=O.NearUInt64BE=O.NearUInt64=O.IntBE=O.Int=O.UIntBE=O.UInt=O.OffsetLayout=O.GreedyCount=O.ExternalLayout=O.bindConstructorLayout=O.nameWithProperty=O.Layout=O.uint8ArrayToBuffer=O.checkUint8Array=void 0;O.constant=O.utf8=O.cstr=$t=O.blob=O.unionLayoutDiscriminator=O.union=Ae=O.seq=O.bits=J=O.struct=O.f64be=O.f64=O.f32be=O.f32=O.ns64be=O.s48be=O.s40be=O.s32be=O.s24be=O.s16be=Re=O.ns64=O.s48=O.s40=O.s32=O.s24=void 0;const Hi=ao;function Ir(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}O.checkUint8Array=Ir;function bt(n){return Ir(n),Hi.Buffer.from(n.buffer,n.byteOffset,n.length)}O.uint8ArrayToBuffer=bt;class _t{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}O.Layout=_t;function $i(n,t){return t.property?n+"["+t.property+"]":n}O.nameWithProperty=$i;function Mc(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof _t))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}O.bindConstructorLayout=Mc;class Ie extends _t{isCount(){throw new Error("ExternalLayout is abstract")}}O.ExternalLayout=Ie;class co extends Ie{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Ir(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}O.GreedyCount=co;class Ki extends Ie{constructor(t,e=0,r){if(!(t instanceof _t))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ne||this.layout instanceof De}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}O.OffsetLayout=Ki;class Ne extends _t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return bt(e).writeUIntLE(t,r,this.span),this.span}}O.UInt=Ne;class De extends _t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return bt(e).writeUIntBE(t,r,this.span),this.span}}O.UIntBE=De;class yr extends _t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readIntLE(e,this.span)}encode(t,e,r=0){return bt(e).writeIntLE(t,r,this.span),this.span}}O.Int=yr;class kr extends _t{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readIntBE(e,this.span)}encode(t,e,r=0){return bt(e).writeIntBE(t,r,this.span),this.span}}O.IntBE=kr;const ki=Math.pow(2,32);function kn(n){const t=Math.floor(n/ki),e=n-t*ki;return{hi32:t,lo32:e}}function Mn(n,t){return n*ki+t}class uo extends _t{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Mn(i,s)}encode(t,e,r=0){const s=kn(t),i=bt(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}O.NearUInt64=uo;class fo extends _t{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Mn(s,i)}encode(t,e,r=0){const s=kn(t),i=bt(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}O.NearUInt64BE=fo;class ho extends _t{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Mn(i,s)}encode(t,e,r=0){const s=kn(t),i=bt(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}O.NearInt64=ho;class lo extends _t{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Mn(s,i)}encode(t,e,r=0){const s=kn(t),i=bt(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}O.NearInt64BE=lo;class po extends _t{constructor(t){super(4,t)}decode(t,e=0){return bt(t).readFloatLE(e)}encode(t,e,r=0){return bt(e).writeFloatLE(t,r),4}}O.Float=po;class go extends _t{constructor(t){super(4,t)}decode(t,e=0){return bt(t).readFloatBE(e)}encode(t,e,r=0){return bt(e).writeFloatBE(t,r),4}}O.FloatBE=go;class yo extends _t{constructor(t){super(8,t)}decode(t,e=0){return bt(t).readDoubleLE(e)}encode(t,e,r=0){return bt(e).writeDoubleLE(t,r),8}}O.Double=yo;class mo extends _t{constructor(t){super(8,t)}decode(t,e=0){return bt(t).readDoubleBE(e)}encode(t,e,r=0){return bt(e).writeDoubleBE(t,r),8}}O.DoubleBE=mo;class wo extends _t{constructor(t,e,r){if(!(t instanceof _t))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Ie&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Ie)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Ie&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof Ie&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((a,f)=>a+s.encode(f,e,r+a),0);return this.count instanceof Ie&&this.count.encode(t.length,e,r),i}}O.Sequence=wo;class bo extends _t{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,a)=>i&&a instanceof _t,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,a)=>i+a.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const a=i.getSpan(t,e);return e+=a,s+a},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Ir(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,a=0;for(const f of this.fields){let d=f.span;if(a=0<d?d:0,f.property!==void 0){const v=t[f.property];v!==void 0&&(a=f.encode(v,e,r),0>d&&(d=f.getSpan(e,r)))}i=r,r+=d}return i+a-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}O.Structure=bo;class Wi{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}O.UnionDiscriminator=Wi;class bn extends Wi{constructor(t,e){if(!(t instanceof Ie&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}O.UnionLayoutDiscriminator=bn;class Gi extends _t{constructor(t,e,r){let s;if(t instanceof Ne||t instanceof De)s=new bn(new Ki(t));else if(t instanceof Ie&&t.isCount())s=new bn(t);else if(t instanceof Wi)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof _t))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ne||t instanceof De)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Ne||t instanceof De,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return a(f)},this.configGetSourceVariant=function(f){a=f.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),a=this.registry[i];if(a===void 0){const f=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[f.property]=f.decode(t,e+d)}else r=a.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,a=this.defaultLayout;let f=0;return this.usesPrefixDiscriminator&&(f=i.layout.span),i.encode(t[i.property],e,r),f+a.encode(t[a.property],e,r+f)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new vo(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}O.Union=Gi;class vo extends _t{constructor(t,e,r,s){if(!(t instanceof Gi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof _t))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}O.VariantLayout=vo;function vr(n){return 0>n&&(n+=4294967296),n}class ji extends _t{constructor(t,e,r){if(!(t instanceof Ne||t instanceof De))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=vr(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const a=t[i.property];a!==void 0&&i.encode(a)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Vi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new xo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}O.BitStructure=ji;class Vi{constructor(t,e,r){if(!(t instanceof ji))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((a,f)=>a+f.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=vr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return vr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==vr(t&this.valueMask))throw new TypeError($i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=vr(t<<this.start);this.container._packedSetValue(vr(e&~this.wordMask)|r)}}O.BitField=Vi;class xo extends Vi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}}O.Boolean=xo;class _o extends _t{constructor(t,e){if(!(t instanceof Ie&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Ie||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),bt(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof Ie&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError($i("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=bt(t);return bt(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof Ie&&this.length.encode(s,e,r),s}}O.Blob=_o;class So extends _t{constructor(t){super(-1,t)}getSpan(t,e=0){Ir(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return bt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Hi.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const a=bt(e);return s.copy(a,r),a[r+i]=0,i+1}}O.CString=So;class Bo extends _t{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Ir(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return bt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Hi.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(bt(e),r),i}}O.UTF8=Bo;class Eo extends _t{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}O.Constant=Eo;O.greedy=(n,t)=>new co(n,t);var pr=O.offset=(n,t,e)=>new Ki(n,t,e),vt=O.u8=n=>new Ne(1,n),Ue=O.u16=n=>new Ne(2,n);O.u24=n=>new Ne(3,n);var rt=O.u32=n=>new Ne(4,n);O.u40=n=>new Ne(5,n);O.u48=n=>new Ne(6,n);var ge=O.nu64=n=>new uo(n);O.u16be=n=>new De(2,n);O.u24be=n=>new De(3,n);O.u32be=n=>new De(4,n);O.u40be=n=>new De(5,n);O.u48be=n=>new De(6,n);O.nu64be=n=>new fo(n);O.s8=n=>new yr(1,n);O.s16=n=>new yr(2,n);O.s24=n=>new yr(3,n);O.s32=n=>new yr(4,n);O.s40=n=>new yr(5,n);O.s48=n=>new yr(6,n);var Re=O.ns64=n=>new ho(n);O.s16be=n=>new kr(2,n);O.s24be=n=>new kr(3,n);O.s32be=n=>new kr(4,n);O.s40be=n=>new kr(5,n);O.s48be=n=>new kr(6,n);O.ns64be=n=>new lo(n);O.f32=n=>new po(n);O.f32be=n=>new go(n);O.f64=n=>new yo(n);O.f64be=n=>new mo(n);var J=O.struct=(n,t,e)=>new bo(n,t,e);O.bits=(n,t,e)=>new ji(n,t,e);var Ae=O.seq=(n,t,e)=>new wo(n,t,e);O.union=(n,t,e)=>new Gi(n,t,e);O.unionLayoutDiscriminator=(n,t)=>new bn(n,t);var $t=O.blob=(n,t)=>new _o(n,t);O.cstr=n=>new So(n);O.utf8=(n,t)=>new Bo(n,t);O.constant=(n,t)=>new Eo(n,t);var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});function Rc(n){{const t=Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Tc=Gr.toBigIntLE=Rc;function Lc(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Gr.toBigIntBE=Lc;function Uc(n,t){{const e=n.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Cc=Gr.toBufferLE=Uc;function Oc(n,t){{const e=n.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Gr.toBufferBE=Oc;class Fc extends TypeError{constructor(t,e){let r;const{message:s,...i}=t,{path:a}=t,f=a.length===0?s:"At path: "+a.join(".")+" -- "+s;super(f),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function Nc(n){return cr(n)&&typeof n[Symbol.iterator]=="function"}function cr(n){return typeof n=="object"&&n!=null}function qe(n){return typeof n=="string"?JSON.stringify(n):""+n}function Pc(n){const{done:t,value:e}=n.next();return t?void 0:e}function Dc(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:a}=e,{refinement:f,message:d="Expected a value of type `"+a+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+qe(r)+"`"}=n;return{value:r,type:a,refinement:f,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*bs(n,t,e,r){Nc(n)||(n=[n]);for(const s of n){const i=Dc(s,t,e,r);i&&(yield i)}}function*Zi(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:s};if(i&&(n=t.coercer(n,f),a&&t.type!=="type"&&cr(t.schema)&&cr(n)&&!Array.isArray(n)))for(const v in n)t.schema[v]===void 0&&delete n[v];let d=!0;for(const v of t.validator(n,f))d=!1,yield[v,void 0];for(let[v,S,A]of t.entries(n,f)){const M=Zi(S,A,{path:v===void 0?r:[...r,v],branch:v===void 0?s:[...s,S],coerce:i,mask:a});for(const E of M)E[0]?(d=!1,yield[E[0],void 0]):i&&(S=E[1],v===void 0?n=S:n instanceof Map?n.set(v,S):n instanceof Set?n.add(S):cr(n)&&(n[v]=S))}if(d)for(const v of t.refiner(n,f))d=!1,yield[v,void 0];d&&(yield[void 0,n])}class Ge{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:a=d=>d,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,s?this.validator=(d,v)=>{const S=s(d,v);return bs(S,v,this,d)}:this.validator=()=>[],i?this.refiner=(d,v)=>{const S=i(d,v);return bs(S,v,this,d)}:this.refiner=()=>[]}assert(t){return zc(t,this)}create(t){return j(t,this)}is(t){return Ao(t,this)}mask(t){return qc(t,this)}validate(t,e={}){return jr(t,this,e)}}function zc(n,t){const e=jr(n,t);if(e[0])throw e[0]}function j(n,t){const e=jr(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function qc(n,t){const e=jr(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Ao(n,t){return!jr(n,t)[0]}function jr(n,t,e={}){const r=Zi(n,t,e),s=Pc(r);if(s[0])return[new Fc(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0];{const i=s[1];return[void 0,i]}}function mr(n,t){return new Ge({type:n,schema:null,validator:t})}function Hc(){return mr("any",()=>!0)}function Z(n){return new Ge({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+qe(t)}})}function Ye(){return mr("boolean",n=>typeof n=="boolean")}function Xi(n){return mr("instance",t=>t instanceof n||"Expected a `"+n.name+"` instance, but received: "+qe(t))}function Ct(n){const t=qe(n),e=typeof n;return new Ge({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+t+"`, but received: "+qe(r)}})}function $c(){return mr("never",()=>!1)}function Q(n){return new Ge({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function F(){return mr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+qe(n))}function ft(n){return new Ge({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Io(n,t){return new Ge({type:"record",schema:null,*entries(e){if(cr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return cr(e)||"Expected an object, but received: "+qe(e)}})}function G(){return mr("string",n=>typeof n=="string"||"Expected a string, but received: "+qe(n))}function Yi(n){const t=$c();return new Ge({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+qe(e)}})}function H(n){const t=Object.keys(n);return new Ge({type:"type",schema:n,*entries(e){if(cr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return cr(e)||"Expected an object, but received: "+qe(e)}})}function ke(n){const t=n.map(e=>e.type).join(" | ");return new Ge({type:"union",schema:null,validator(e,r){const s=[];for(const i of n){const[...a]=Zi(e,i,r),[f]=a;if(f[0])for(const[d]of a)d&&s.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+qe(e),...s]}})}function Vr(){return mr("unknown",()=>!0)}function Zr(n,t,e){return new Ge({...n,coercer:(r,s)=>Ao(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var en,Kc=new Uint8Array(16);function ko(){if(!en&&(en=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!en))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return en(Kc)}var Wc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rn(n){return typeof n=="string"&&Wc.test(n)}var pe=[];for(var gi=0;gi<256;++gi)pe.push((gi+256).toString(16).substr(1));function Tn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(pe[n[t+0]]+pe[n[t+1]]+pe[n[t+2]]+pe[n[t+3]]+"-"+pe[n[t+4]]+pe[n[t+5]]+"-"+pe[n[t+6]]+pe[n[t+7]]+"-"+pe[n[t+8]]+pe[n[t+9]]+"-"+pe[n[t+10]]+pe[n[t+11]]+pe[n[t+12]]+pe[n[t+13]]+pe[n[t+14]]+pe[n[t+15]]).toLowerCase();if(!Rn(e))throw TypeError("Stringified UUID is invalid");return e}var vs,yi,mi=0,wi=0;function Gc(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||vs,a=n.clockseq!==void 0?n.clockseq:yi;if(i==null||a==null){var f=n.random||(n.rng||ko)();i==null&&(i=vs=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=yi=(f[6]<<8|f[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),v=n.nsecs!==void 0?n.nsecs:wi+1,S=d-mi+(v-wi)/1e4;if(S<0&&n.clockseq===void 0&&(a=a+1&16383),(S<0||d>mi)&&n.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mi=d,wi=v,yi=a,d+=122192928e5;var A=((d&268435455)*1e4+v)%4294967296;s[r++]=A>>>24&255,s[r++]=A>>>16&255,s[r++]=A>>>8&255,s[r++]=A&255;var M=d/4294967296*1e4&268435455;s[r++]=M>>>8&255,s[r++]=M&255,s[r++]=M>>>24&15|16,s[r++]=M>>>16&255,s[r++]=a>>>8|128,s[r++]=a&255;for(var E=0;E<6;++E)s[r+E]=i[E];return t||Tn(s)}function Mo(n){if(!Rn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function jc(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Vc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Zc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ro(n,t,e){function r(s,i,a,f){if(typeof s=="string"&&(s=jc(s)),typeof i=="string"&&(i=Mo(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,a){f=f||0;for(var v=0;v<16;++v)a[f+v]=d[v];return a}return Tn(d)}try{r.name=n}catch{}return r.DNS=Vc,r.URL=Zc,r}function Xc(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Yc(Jc(Qc(n),n.length*8))}function Yc(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function To(n){return(n+64>>>9<<4)+14+1}function Jc(n,t){n[t>>5]|=128<<t%32,n[To(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,a=0;a<n.length;a+=16){var f=e,d=r,v=s,S=i;e=be(e,r,s,i,n[a],7,-680876936),i=be(i,e,r,s,n[a+1],12,-389564586),s=be(s,i,e,r,n[a+2],17,606105819),r=be(r,s,i,e,n[a+3],22,-1044525330),e=be(e,r,s,i,n[a+4],7,-176418897),i=be(i,e,r,s,n[a+5],12,1200080426),s=be(s,i,e,r,n[a+6],17,-1473231341),r=be(r,s,i,e,n[a+7],22,-45705983),e=be(e,r,s,i,n[a+8],7,1770035416),i=be(i,e,r,s,n[a+9],12,-1958414417),s=be(s,i,e,r,n[a+10],17,-42063),r=be(r,s,i,e,n[a+11],22,-1990404162),e=be(e,r,s,i,n[a+12],7,1804603682),i=be(i,e,r,s,n[a+13],12,-40341101),s=be(s,i,e,r,n[a+14],17,-1502002290),r=be(r,s,i,e,n[a+15],22,1236535329),e=ve(e,r,s,i,n[a+1],5,-165796510),i=ve(i,e,r,s,n[a+6],9,-1069501632),s=ve(s,i,e,r,n[a+11],14,643717713),r=ve(r,s,i,e,n[a],20,-373897302),e=ve(e,r,s,i,n[a+5],5,-701558691),i=ve(i,e,r,s,n[a+10],9,38016083),s=ve(s,i,e,r,n[a+15],14,-660478335),r=ve(r,s,i,e,n[a+4],20,-405537848),e=ve(e,r,s,i,n[a+9],5,568446438),i=ve(i,e,r,s,n[a+14],9,-1019803690),s=ve(s,i,e,r,n[a+3],14,-187363961),r=ve(r,s,i,e,n[a+8],20,1163531501),e=ve(e,r,s,i,n[a+13],5,-1444681467),i=ve(i,e,r,s,n[a+2],9,-51403784),s=ve(s,i,e,r,n[a+7],14,1735328473),r=ve(r,s,i,e,n[a+12],20,-1926607734),e=xe(e,r,s,i,n[a+5],4,-378558),i=xe(i,e,r,s,n[a+8],11,-2022574463),s=xe(s,i,e,r,n[a+11],16,1839030562),r=xe(r,s,i,e,n[a+14],23,-35309556),e=xe(e,r,s,i,n[a+1],4,-1530992060),i=xe(i,e,r,s,n[a+4],11,1272893353),s=xe(s,i,e,r,n[a+7],16,-155497632),r=xe(r,s,i,e,n[a+10],23,-1094730640),e=xe(e,r,s,i,n[a+13],4,681279174),i=xe(i,e,r,s,n[a],11,-358537222),s=xe(s,i,e,r,n[a+3],16,-722521979),r=xe(r,s,i,e,n[a+6],23,76029189),e=xe(e,r,s,i,n[a+9],4,-640364487),i=xe(i,e,r,s,n[a+12],11,-421815835),s=xe(s,i,e,r,n[a+15],16,530742520),r=xe(r,s,i,e,n[a+2],23,-995338651),e=_e(e,r,s,i,n[a],6,-198630844),i=_e(i,e,r,s,n[a+7],10,1126891415),s=_e(s,i,e,r,n[a+14],15,-1416354905),r=_e(r,s,i,e,n[a+5],21,-57434055),e=_e(e,r,s,i,n[a+12],6,1700485571),i=_e(i,e,r,s,n[a+3],10,-1894986606),s=_e(s,i,e,r,n[a+10],15,-1051523),r=_e(r,s,i,e,n[a+1],21,-2054922799),e=_e(e,r,s,i,n[a+8],6,1873313359),i=_e(i,e,r,s,n[a+15],10,-30611744),s=_e(s,i,e,r,n[a+6],15,-1560198380),r=_e(r,s,i,e,n[a+13],21,1309151649),e=_e(e,r,s,i,n[a+4],6,-145523070),i=_e(i,e,r,s,n[a+11],10,-1120210379),s=_e(s,i,e,r,n[a+2],15,718787259),r=_e(r,s,i,e,n[a+9],21,-343485551),e=ar(e,f),r=ar(r,d),s=ar(s,v),i=ar(i,S)}return[e,r,s,i]}function Qc(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(To(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ar(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function tu(n,t){return n<<t|n>>>32-t}function Ln(n,t,e,r,s,i){return ar(tu(ar(ar(t,n),ar(r,i)),s),e)}function be(n,t,e,r,s,i,a){return Ln(t&e|~t&r,n,t,s,i,a)}function ve(n,t,e,r,s,i,a){return Ln(t&r|e&~r,n,t,s,i,a)}function xe(n,t,e,r,s,i,a){return Ln(t^e^r,n,t,s,i,a)}function _e(n,t,e,r,s,i,a){return Ln(e^(t|~r),n,t,s,i,a)}var eu=Ro("v3",48,Xc),ru=eu;function nu(n,t,e){n=n||{};var r=n.random||(n.rng||ko)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Tn(r)}function iu(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function bi(n,t){return n<<t|n>>>32-t}function su(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),f=new Array(a),d=0;d<a;++d){for(var v=new Uint32Array(16),S=0;S<16;++S)v[S]=n[d*64+S*4]<<24|n[d*64+S*4+1]<<16|n[d*64+S*4+2]<<8|n[d*64+S*4+3];f[d]=v}f[a-1][14]=(n.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(n.length-1)*8&4294967295;for(var A=0;A<a;++A){for(var M=new Uint32Array(80),E=0;E<16;++E)M[E]=f[A][E];for(var R=16;R<80;++R)M[R]=bi(M[R-3]^M[R-8]^M[R-14]^M[R-16],1);for(var k=e[0],U=e[1],z=e[2],P=e[3],C=e[4],$=0;$<80;++$){var D=Math.floor($/20),K=bi(k,5)+iu(D,U,z,P)+C+t[D]+M[$]>>>0;C=P,P=z,z=bi(U,30)>>>0,U=k,k=K}e[0]=e[0]+k>>>0,e[1]=e[1]+U>>>0,e[2]=e[2]+z>>>0,e[3]=e[3]+P>>>0,e[4]=e[4]+C>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var ou=Ro("v5",80,su),au=ou,cu="00000000-0000-0000-0000-000000000000";function uu(n){if(!Rn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}var fu=Object.freeze(Object.defineProperty({__proto__:null,v1:Gc,v3:ru,v4:nu,v5:au,NIL:cu,version:uu,validate:Rn,stringify:Tn,parse:Mo},Symbol.toStringTag,{value:"Module"})),Lo=qs(fu);const hu=Lo.v4,lu=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const a=typeof r.generator=="function"?r.generator:function(){return hu()};i.id=a(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var du=lu;const pu=Lo.v4,gu=du,zr=function(n,t){if(!(this instanceof zr))return new zr(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return pu()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var yu=zr;zr.prototype.request=function(n,t,e,r){const s=this;let i=null;const a=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const v=typeof r=="function";try{i=gu(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(v)return r(S);throw S}if(!v)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(v){return r(v)}return this.callServer(d,function(v,S){s._parseResponse(v,S,r)}),i};zr.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(a){return typeof a.error<"u"},i=function(a){return!s(a)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};var Un={exports:{}};(function(n){function t(e){return e&&e.__esModule?e:{default:e}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Un);var Uo={exports:{}},Cn={exports:{}};(function(n){function t(e){return n.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Cn);(function(n){var t=Cn.exports.default;function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n.exports=e=function(){return r},n.exports.__esModule=!0,n.exports.default=n.exports;var r={},s=Object.prototype,i=s.hasOwnProperty,a=typeof Symbol=="function"?Symbol:{},f=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",v=a.toStringTag||"@@toStringTag";function S(y,o,l){return Object.defineProperty(y,o,{value:l,enumerable:!0,configurable:!0,writable:!0}),y[o]}try{S({},"")}catch{S=function(l,g,w){return l[g]=w}}function A(y,o,l,g){var w=o&&o.prototype instanceof R?o:R,x=Object.create(w.prototype),B=new Ot(g||[]);return x._invoke=function(T,b,h){var _="suspendedStart";return function(X,et){if(_==="executing")throw new Error("Generator is already running");if(_==="completed"){if(X==="throw")throw et;return Ft()}for(h.method=X,h.arg=et;;){var nt=h.delegate;if(nt){var Tt=W(nt,h);if(Tt){if(Tt===E)continue;return Tt}}if(h.method==="next")h.sent=h._sent=h.arg;else if(h.method==="throw"){if(_==="suspendedStart")throw _="completed",h.arg;h.dispatchException(h.arg)}else h.method==="return"&&h.abrupt("return",h.arg);_="executing";var lt=M(T,b,h);if(lt.type==="normal"){if(_=h.done?"completed":"suspendedYield",lt.arg===E)continue;return{value:lt.arg,done:h.done}}lt.type==="throw"&&(_="completed",h.method="throw",h.arg=lt.arg)}}}(y,l,B),x}function M(y,o,l){try{return{type:"normal",arg:y.call(o,l)}}catch(g){return{type:"throw",arg:g}}}r.wrap=A;var E={};function R(){}function k(){}function U(){}var z={};S(z,f,function(){return this});var P=Object.getPrototypeOf,C=P&&P(P(pt([])));C&&C!==s&&i.call(C,f)&&(z=C);var $=U.prototype=R.prototype=Object.create(z);function D(y){["next","throw","return"].forEach(function(o){S(y,o,function(l){return this._invoke(o,l)})})}function K(y,o){function l(w,x,B,T){var b=M(y[w],y,x);if(b.type!=="throw"){var h=b.arg,_=h.value;return _&&t(_)=="object"&&i.call(_,"__await")?o.resolve(_.__await).then(function(X){l("next",X,B,T)},function(X){l("throw",X,B,T)}):o.resolve(_).then(function(X){h.value=X,B(h)},function(X){return l("throw",X,B,T)})}T(b.arg)}var g;this._invoke=function(w,x){function B(){return new o(function(T,b){l(w,x,T,b)})}return g=g?g.then(B,B):B()}}function W(y,o){var l=y.iterator[o.method];if(l===void 0){if(o.delegate=null,o.method==="throw"){if(y.iterator.return&&(o.method="return",o.arg=void 0,W(y,o),o.method==="throw"))return E;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var g=M(l,y.iterator,o.arg);if(g.type==="throw")return o.method="throw",o.arg=g.arg,o.delegate=null,E;var w=g.arg;return w?w.done?(o[y.resultName]=w.value,o.next=y.nextLoc,o.method!=="return"&&(o.method="next",o.arg=void 0),o.delegate=null,E):w:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,E)}function V(y){var o={tryLoc:y[0]};1 in y&&(o.catchLoc=y[1]),2 in y&&(o.finallyLoc=y[2],o.afterLoc=y[3]),this.tryEntries.push(o)}function mt(y){var o=y.completion||{};o.type="normal",delete o.arg,y.completion=o}function Ot(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(V,this),this.reset(!0)}function pt(y){if(y){var o=y[f];if(o)return o.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var l=-1,g=function w(){for(;++l<y.length;)if(i.call(y,l))return w.value=y[l],w.done=!1,w;return w.value=void 0,w.done=!0,w};return g.next=g}}return{next:Ft}}function Ft(){return{value:void 0,done:!0}}return k.prototype=U,S($,"constructor",U),S(U,"constructor",k),k.displayName=S(U,v,"GeneratorFunction"),r.isGeneratorFunction=function(y){var o=typeof y=="function"&&y.constructor;return!!o&&(o===k||(o.displayName||o.name)==="GeneratorFunction")},r.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,U):(y.__proto__=U,S(y,v,"GeneratorFunction")),y.prototype=Object.create($),y},r.awrap=function(y){return{__await:y}},D(K.prototype),S(K.prototype,d,function(){return this}),r.AsyncIterator=K,r.async=function(y,o,l,g,w){w===void 0&&(w=Promise);var x=new K(A(y,o,l,g),w);return r.isGeneratorFunction(o)?x:x.next().then(function(B){return B.done?B.value:x.next()})},D($),S($,v,"Generator"),S($,f,function(){return this}),S($,"toString",function(){return"[object Generator]"}),r.keys=function(y){var o=[];for(var l in y)o.push(l);return o.reverse(),function g(){for(;o.length;){var w=o.pop();if(w in y)return g.value=w,g.done=!1,g}return g.done=!0,g}},r.values=pt,Ot.prototype={constructor:Ot,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(mt),!o)for(var l in this)l.charAt(0)==="t"&&i.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var l=this;function g(h,_){return B.type="throw",B.arg=o,l.next=h,_&&(l.method="next",l.arg=void 0),!!_}for(var w=this.tryEntries.length-1;w>=0;--w){var x=this.tryEntries[w],B=x.completion;if(x.tryLoc==="root")return g("end");if(x.tryLoc<=this.prev){var T=i.call(x,"catchLoc"),b=i.call(x,"finallyLoc");if(T&&b){if(this.prev<x.catchLoc)return g(x.catchLoc,!0);if(this.prev<x.finallyLoc)return g(x.finallyLoc)}else if(T){if(this.prev<x.catchLoc)return g(x.catchLoc,!0)}else{if(!b)throw new Error("try statement without catch or finally");if(this.prev<x.finallyLoc)return g(x.finallyLoc)}}}},abrupt:function(o,l){for(var g=this.tryEntries.length-1;g>=0;--g){var w=this.tryEntries[g];if(w.tryLoc<=this.prev&&i.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var x=w;break}}x&&(o==="break"||o==="continue")&&x.tryLoc<=l&&l<=x.finallyLoc&&(x=null);var B=x?x.completion:{};return B.type=o,B.arg=l,x?(this.method="next",this.next=x.finallyLoc,E):this.complete(B)},complete:function(o,l){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&l&&(this.next=l),E},finish:function(o){for(var l=this.tryEntries.length-1;l>=0;--l){var g=this.tryEntries[l];if(g.finallyLoc===o)return this.complete(g.completion,g.afterLoc),mt(g),E}},catch:function(o){for(var l=this.tryEntries.length-1;l>=0;--l){var g=this.tryEntries[l];if(g.tryLoc===o){var w=g.completion;if(w.type==="throw"){var x=w.arg;mt(g)}return x}}throw new Error("illegal catch attempt")},delegateYield:function(o,l,g){return this.delegate={iterator:pt(o),resultName:l,nextLoc:g},this.method==="next"&&(this.arg=void 0),E}},r}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Uo);var an=Uo.exports(),mu=an;try{regeneratorRuntime=an}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=an:Function("r","regeneratorRuntime = r")(an)}var Co={exports:{}};(function(n){function t(r,s,i,a,f,d,v){try{var S=r[d](v),A=S.value}catch(M){i(M);return}S.done?s(A):Promise.resolve(A).then(a,f)}function e(r){return function(){var s=this,i=arguments;return new Promise(function(a,f){var d=r.apply(s,i);function v(A){t(d,a,f,v,S,"next",A)}function S(A){t(d,a,f,v,S,"throw",A)}v(void 0)})}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Co);var On={exports:{}};(function(n){function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(On);var Fn={exports:{}};(function(n){function t(r,s){for(var i=0;i<s.length;i++){var a=s[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function e(r,s,i){return s&&t(r.prototype,s),i&&t(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Fn);var Nn={exports:{}},Oo={exports:{}};(function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},n.exports.__esModule=!0,n.exports.default=n.exports,t(e,r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Oo);(function(n){var t=Oo.exports;function e(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Nn);var Pn={exports:{}},Fo={exports:{}};(function(n){function t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Fo);(function(n){var t=Cn.exports.default,e=Fo.exports;function r(s,i){if(i&&(t(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(s)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Pn);var Dn={exports:{}};(function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Dn);var Ji={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,v,S){this.fn=d,this.context=v,this.once=S||!1}function i(d,v,S,A,M){if(typeof S!="function")throw new TypeError("The listener must be a function");var E=new s(S,A||d,M),R=e?e+v:v;return d._events[R]?d._events[R].fn?d._events[R]=[d._events[R],E]:d._events[R].push(E):(d._events[R]=E,d._eventsCount++),d}function a(d,v){--d._eventsCount===0?d._events=new r:delete d._events[v]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var v=[],S,A;if(this._eventsCount===0)return v;for(A in S=this._events)t.call(S,A)&&v.push(e?A.slice(1):A);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(S)):v},f.prototype.listeners=function(v){var S=e?e+v:v,A=this._events[S];if(!A)return[];if(A.fn)return[A.fn];for(var M=0,E=A.length,R=new Array(E);M<E;M++)R[M]=A[M].fn;return R},f.prototype.listenerCount=function(v){var S=e?e+v:v,A=this._events[S];return A?A.fn?1:A.length:0},f.prototype.emit=function(v,S,A,M,E,R){var k=e?e+v:v;if(!this._events[k])return!1;var U=this._events[k],z=arguments.length,P,C;if(U.fn){switch(U.once&&this.removeListener(v,U.fn,void 0,!0),z){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,S),!0;case 3:return U.fn.call(U.context,S,A),!0;case 4:return U.fn.call(U.context,S,A,M),!0;case 5:return U.fn.call(U.context,S,A,M,E),!0;case 6:return U.fn.call(U.context,S,A,M,E,R),!0}for(C=1,P=new Array(z-1);C<z;C++)P[C-1]=arguments[C];U.fn.apply(U.context,P)}else{var $=U.length,D;for(C=0;C<$;C++)switch(U[C].once&&this.removeListener(v,U[C].fn,void 0,!0),z){case 1:U[C].fn.call(U[C].context);break;case 2:U[C].fn.call(U[C].context,S);break;case 3:U[C].fn.call(U[C].context,S,A);break;case 4:U[C].fn.call(U[C].context,S,A,M);break;default:if(!P)for(D=1,P=new Array(z-1);D<z;D++)P[D-1]=arguments[D];U[C].fn.apply(U[C].context,P)}}return!0},f.prototype.on=function(v,S,A){return i(this,v,S,A,!1)},f.prototype.once=function(v,S,A){return i(this,v,S,A,!0)},f.prototype.removeListener=function(v,S,A,M){var E=e?e+v:v;if(!this._events[E])return this;if(!S)return a(this,E),this;var R=this._events[E];if(R.fn)R.fn===S&&(!M||R.once)&&(!A||R.context===A)&&a(this,E);else{for(var k=0,U=[],z=R.length;k<z;k++)(R[k].fn!==S||M&&!R[k].once||A&&R[k].context!==A)&&U.push(R[k]);U.length?this._events[E]=U.length===1?U[0]:U:a(this,E)}return this},f.prototype.removeAllListeners=function(v){var S;return v?(S=e?e+v:v,this._events[S]&&a(this,S)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f})(Ji);const[No,Po,Do]=[[],[],[]],wu=BigInt(0),Rr=BigInt(1),bu=BigInt(2),vu=BigInt(7),xu=BigInt(256),_u=BigInt(113);for(let n=0,t=Rr,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],No.push(2*(5*r+e)),Po.push((n+1)*(n+2)/2%64);let s=wu;for(let i=0;i<7;i++)t=(t<<Rr^(t>>vu)*_u)%xu,t&bu&&(s^=Rr<<(Rr<<BigInt(i))-Rr);Do.push(s)}const[Su,Bu]=at.split(Do,!0),xs=(n,t,e)=>e>32?at.rotlBH(n,t,e):at.rotlSH(n,t,e),_s=(n,t,e)=>e>32?at.rotlBL(n,t,e):at.rotlSL(n,t,e);function Eu(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)e[a]=n[a]^n[a+10]^n[a+20]^n[a+30]^n[a+40];for(let a=0;a<10;a+=2){const f=(a+8)%10,d=(a+2)%10,v=e[d],S=e[d+1],A=xs(v,S,1)^e[f],M=_s(v,S,1)^e[f+1];for(let E=0;E<50;E+=10)n[a+E]^=A,n[a+E+1]^=M}let s=n[2],i=n[3];for(let a=0;a<24;a++){const f=Po[a],d=xs(s,i,f),v=_s(s,i,f),S=No[a];s=n[S],i=n[S+1],n[S]=d,n[S+1]=v}for(let a=0;a<50;a+=10){for(let f=0;f<10;f++)e[f]=n[a+f];for(let f=0;f<10;f++)n[a+f]^=~e[(f+2)%10]&e[(f+4)%10]}n[0]^=Su[r],n[1]^=Bu[r]}e.fill(0)}class zn extends $s{constructor(t,e,r,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ve.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=fa(this.state)}keccak(){Eu(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ve.exists(this);const{blockLen:e,state:r}=this;t=En(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(e-this.pos,s-i);for(let f=0;f<a;f++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Ve.exists(this,!1),Ve.bytes(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ve.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ve.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new zn(e,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const hr=(n,t,e)=>$r(()=>new zn(t,n,e));hr(6,144,224/8);hr(6,136,256/8);hr(6,104,384/8);hr(6,72,512/8);hr(1,144,224/8);hr(1,136,256/8);hr(1,104,384/8);hr(1,72,512/8);const zo=(n,t,e)=>da((r={})=>new zn(t,n,r.dkLen===void 0?e:r.dkLen,!0));zo(31,168,128/8);zo(31,136,256/8);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const St=BigInt(0),Kt=BigInt(1),Gt=BigInt(2),cn=BigInt(3),Au=BigInt(8),Mi=Gt**BigInt(256),he={a:St,b:BigInt(7),P:Mi-Gt**BigInt(32)-BigInt(977),n:Mi-BigInt("432420386565659656852420866394968145599"),h:Kt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function Ss(n){const{a:t,b:e}=he,r=Y(n*n),s=Y(r*n);return Y(s+t*n+e)}const rn=he.a===St;class xt{constructor(t,e,r){this.x=t,this.y=e,this.z=r}static fromAffine(t){if(!(t instanceof Se))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new xt(t.x,t.y,Kt)}static toAffineBatch(t){const e=Ru(t.map(r=>r.z));return t.map((r,s)=>r.toAffine(e[s]))}static normalizeZ(t){return xt.toAffineBatch(t).map(xt.fromAffine)}equals(t){if(!(t instanceof xt))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:s}=this,{x:i,y:a,z:f}=t,d=Y(s**Gt),v=Y(f**Gt),S=Y(e*v),A=Y(i*d),M=Y(Y(r*f)*v),E=Y(Y(a*s)*d);return S===A&&M===E}negate(){return new xt(this.x,Y(-this.y),this.z)}double(){const{x:t,y:e,z:r}=this,s=Y(t**Gt),i=Y(e**Gt),a=Y(i**Gt),f=Y(Gt*(Y((t+i)**Gt)-s-a)),d=Y(cn*s),v=Y(d**Gt),S=Y(v-Gt*f),A=Y(d*(f-S)-Au*a),M=Y(Gt*e*r);return new xt(S,A,M)}add(t){if(!(t instanceof xt))throw new TypeError("JacobianPoint expected");const{x:e,y:r,z:s}=this,{x:i,y:a,z:f}=t;if(i===St||a===St)return this;if(e===St||r===St)return t;const d=Y(s**Gt),v=Y(f**Gt),S=Y(e*v),A=Y(i*d),M=Y(Y(r*f)*v),E=Y(Y(a*s)*d),R=Y(A-S),k=Y(E-M);if(R===St)return k===St?this.double():xt.ZERO;const U=Y(R**Gt),z=Y(R*U),P=Y(S*U),C=Y(k**Gt-z-Gt*P),$=Y(k*(P-C)-M*z),D=Y(s*f*R);return new xt(C,$,D)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=xt.ZERO;if(typeof t=="bigint"&&t===St)return e;let r=Is(t);if(r===Kt)return this;if(!rn){let A=e,M=this;for(;r>St;)r&Kt&&(A=A.add(M)),M=M.double(),r>>=Kt;return A}let{k1neg:s,k1:i,k2neg:a,k2:f}=Ms(r),d=e,v=e,S=this;for(;i>St||f>St;)i&Kt&&(d=d.add(S)),f&Kt&&(v=v.add(S)),S=S.double(),i>>=Kt,f>>=Kt;return s&&(d=d.negate()),a&&(v=v.negate()),v=new xt(Y(v.x*he.beta),v.y,v.z),d.add(v)}precomputeWindow(t){const e=rn?128/t+1:256/t+1,r=[];let s=this,i=s;for(let a=0;a<e;a++){i=s,r.push(i);for(let f=1;f<2**(t-1);f++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(t,e){!e&&this.equals(xt.BASE)&&(e=Se.BASE);const r=e&&e._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=e&&Ri.get(e);s||(s=this.precomputeWindow(r),e&&r!==1&&(s=xt.normalizeZ(s),Ri.set(e,s)));let i=xt.ZERO,a=xt.ZERO;const f=1+(rn?128/r:256/r),d=2**(r-1),v=BigInt(2**r-1),S=2**r,A=BigInt(r);for(let M=0;M<f;M++){const E=M*d;let R=Number(t&v);if(t>>=A,R>d&&(R-=S,t+=Kt),R===0){let k=s[E];M%2&&(k=k.negate()),a=a.add(k)}else{let k=s[E+Math.abs(R)-1];R<0&&(k=k.negate()),i=i.add(k)}}return{p:i,f:a}}multiply(t,e){let r=Is(t),s,i;if(rn){const{k1neg:a,k1:f,k2neg:d,k2:v}=Ms(r);let{p:S,f:A}=this.wNAF(f,e),{p:M,f:E}=this.wNAF(v,e);a&&(S=S.negate()),d&&(M=M.negate()),M=new xt(Y(M.x*he.beta),M.y,M.z),s=S.add(M),i=A.add(E)}else{const{p:a,f}=this.wNAF(r,e);s=a,i=f}return xt.normalizeZ([s,i])[0]}toAffine(t=Qi(this.z)){const{x:e,y:r,z:s}=this,i=t,a=Y(i*i),f=Y(a*i),d=Y(e*a),v=Y(r*f);if(Y(s*i)!==Kt)throw new Error("invZ was invalid");return new Se(d,v)}}xt.BASE=new xt(he.Gx,he.Gy,Kt);xt.ZERO=new xt(St,Kt,St);const Ri=new WeakMap;class Se{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Ri.delete(this)}static fromCompressedHex(t){const e=t.length===32,r=_r(e?t:t.subarray(1));if(!vi(r))throw new Error("Point is not on curve");const s=Ss(r);let i=Mu(s);const a=(i&Kt)===Kt;e?a&&(i=Y(-i)):(t[0]&1)===1!==a&&(i=Y(-i));const f=new Se(r,i);return f.assertValidity(),f}static fromUncompressedHex(t){const e=_r(t.subarray(1,33)),r=_r(t.subarray(33,65)),s=new Se(e,r);return s.assertValidity(),s}static fromHex(t){const e=As(t),r=e.length,s=e[0];if(r===32||r===33&&(s===2||s===3))return this.fromCompressedHex(e);if(r===65&&s===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return Se.BASE.multiply(Lu(t))}static fromSignature(t,e,r){t=As(t);const s=Tu(t),{r:i,s:a}=Uu(e);if(r!==0&&r!==1)throw new Error("Cannot recover signature: invalid recovery bit");const f=r&1?"03":"02",d=Se.fromHex(f+Fr(i)),{n:v}=he,S=Qi(i,v),A=Y(-s*S,v),M=Y(a*S,v),E=Se.BASE.multiplyAndAddUnsafe(d,A,M);if(!E)throw new Error("Cannot recover signature: point at infinify");return E.assertValidity(),E}toRawBytes(t=!1){return Nr(this.toHex(t))}toHex(t=!1){const e=Fr(this.x);return t?`${this.y&Kt?"03":"02"}${e}`:`04${e}${Fr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:r}=this;if(!vi(e)||!vi(r))throw new Error(t);const s=Y(r*r),i=Ss(e);if(Y(s-i)!==St)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Se(this.x,Y(-this.y))}double(){return xt.fromAffine(this).double().toAffine()}add(t){return xt.fromAffine(this).add(xt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return xt.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,r){const s=xt.fromAffine(this),i=e===St||e===Kt||this!==Se.BASE?s.multiplyUnsafe(e):s.multiply(e),a=xt.fromAffine(t).multiplyUnsafe(r),f=i.add(a);return f.equals(xt.ZERO)?void 0:f.toAffine()}}Se.BASE=new Se(he.Gx,he.Gy);Se.ZERO=new Se(St,St);function Bs(n){return Number.parseInt(n[0],16)>=8?"00"+n:n}function Es(n){if(n.length<2||n[0]!==2)throw new Error(`Invalid signature integer tag: ${qr(n)}`);const t=n[1],e=n.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:_r(e),left:n.subarray(t+2)}}function Iu(n){if(n.length<2||n[0]!=48)throw new Error(`Invalid signature tag: ${qr(n)}`);if(n[1]!==n.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=Es(n.subarray(2)),{data:r,left:s}=Es(e);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${qr(s)}`);return{r:t,s:r}}class gr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=Ti(t),r="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${r}: Expected string or Uint8Array`);const s=e?qr(t):t;if(s.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new gr(vn(s.slice(0,64)),vn(s.slice(64,128)))}static fromDER(t){const e=Ti(t);if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=Iu(e?t:Nr(t));return new gr(r,s)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!xn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!xn(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=he.n>>Kt;return this.s>t}normalizeS(){return this.hasHighS()?new gr(this.r,he.n-this.s):this}toDERRawBytes(t=!1){return Nr(this.toDERHex(t))}toDERHex(t=!1){const e=Bs(Tr(this.s));if(t)return e;const r=Bs(Tr(this.r)),s=Tr(r.length/2),i=Tr(e.length/2);return`30${Tr(r.length/2+e.length/2+4)}02${s}${r}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Nr(this.toCompactHex())}toCompactHex(){return Fr(this.r)+Fr(this.s)}}function Ti(n){return n instanceof Uint8Array}const ku=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function qr(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<n.length;e++)t+=ku[n[e]];return t}function Fr(n){if(n>Mi)throw new Error("Expected number < 2^256");return n.toString(16).padStart(64,"0")}function Tr(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function vn(n){if(typeof n!="string")throw new TypeError("hexToNumber: expected string, got "+typeof n);return BigInt(`0x${n}`)}function Nr(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+n.length);const t=new Uint8Array(n.length/2);for(let e=0;e<t.length;e++){const r=e*2,s=n.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function _r(n){return vn(qr(n))}function As(n){return n instanceof Uint8Array?Uint8Array.from(n):Nr(n)}function Is(n){if(typeof n=="number"&&Number.isSafeInteger(n)&&n>0)return BigInt(n);if(typeof n=="bigint"&&xn(n))return n;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Y(n,t=he.P){const e=n%t;return e>=St?e:t+e}function Le(n,t){const{P:e}=he;let r=n;for(;t-- >St;)r*=r,r%=e;return r}function Mu(n){const{P:t}=he,e=BigInt(6),r=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),f=BigInt(88),d=n*n*n%t,v=d*d*n%t,S=Le(v,cn)*v%t,A=Le(S,cn)*v%t,M=Le(A,Gt)*d%t,E=Le(M,r)*M%t,R=Le(E,s)*E%t,k=Le(R,a)*R%t,U=Le(k,f)*k%t,z=Le(U,a)*R%t,P=Le(z,cn)*v%t,C=Le(P,i)*E%t,$=Le(C,e)*d%t;return Le($,Gt)}function Qi(n,t=he.P){if(n===St||t<=St)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Y(n,t),r=t,s=St,i=Kt;for(;e!==St;){const f=r/e,d=r%e,v=s-i*f;r=e,e=d,s=i,i=v}if(r!==Kt)throw new Error("invert: does not exist");return Y(s,t)}function Ru(n,t=he.P){const e=new Array(n.length),r=n.reduce((i,a,f)=>a===St?i:(e[f]=i,Y(i*a,t)),Kt),s=Qi(r,t);return n.reduceRight((i,a,f)=>a===St?i:(e[f]=Y(i*e[f],t),Y(i*a,t)),s),e}const ks=(n,t)=>(n+t/Gt)/t,nn=Gt**BigInt(128);function Ms(n){const{n:t}=he,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Kt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=ks(i*n,t),f=ks(-r*n,t);let d=Y(n-a*e-f*s,t),v=Y(-a*r-f*i,t);const S=d>nn,A=v>nn;if(S&&(d=t-d),A&&(v=t-v),d>nn||v>nn)throw new Error("splitScalarEndo: Endomorphism failed, k="+n);return{k1neg:S,k1:d,k2neg:A,k2:v}}function Tu(n){const{n:t}=he,r=n.length*8-256;let s=_r(n);return r>0&&(s=s>>BigInt(r)),s>=t&&(s-=t),s}function xn(n){return St<n&&n<he.n}function vi(n){return St<n&&n<he.P}function Lu(n){let t;if(typeof n=="bigint")t=n;else if(typeof n=="number"&&Number.isSafeInteger(n)&&n>0)t=BigInt(n);else if(typeof n=="string"){if(n.length!==64)throw new Error("Expected 32 bytes of private key");t=vn(n)}else if(Ti(n)){if(n.length!==32)throw new Error("Expected 32 bytes of private key");t=_r(n)}else throw new TypeError("Expected valid private key");if(!xn(t))throw new Error("Expected private key: 0 < key < n");return t}function Uu(n){if(n instanceof gr)return n.assertValidity(),n;try{return gr.fromDER(n)}catch{return gr.fromCompact(n)}}Se.BASE._setWindowSize(8);var sn=pn.exports.Buffer;function Cu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var a=n.length,f=n.charAt(0),d=Math.log(a)/Math.log(256),v=Math.log(256)/Math.log(a);function S(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=sn.from(E)),!sn.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var R=0,k=0,U=0,z=E.length;U!==z&&E[U]===0;)U++,R++;for(var P=(z-U)*v+1>>>0,C=new Uint8Array(P);U!==z;){for(var $=E[U],D=0,K=P-1;($!==0||D<k)&&K!==-1;K--,D++)$+=256*C[K]>>>0,C[K]=$%a>>>0,$=$/a>>>0;if($!==0)throw new Error("Non-zero carry");k=D,U++}for(var W=P-k;W!==P&&C[W]===0;)W++;for(var V=f.repeat(R);W<P;++W)V+=n.charAt(C[W]);return V}function A(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return sn.alloc(0);for(var R=0,k=0,U=0;E[R]===f;)k++,R++;for(var z=(E.length-R)*d+1>>>0,P=new Uint8Array(z);E[R];){var C=t[E.charCodeAt(R)];if(C===255)return;for(var $=0,D=z-1;(C!==0||$<U)&&D!==-1;D--,$++)C+=a*P[D]>>>0,P[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");U=$,R++}for(var K=z-U;K!==z&&P[K]===0;)K++;var W=sn.allocUnsafe(k+(z-K));W.fill(0,0,k);for(var V=k;K!==z;)W[V++]=P[K++];return W}function M(E){var R=A(E);if(R)return R;throw new Error("Non-base"+a+" character")}return{encode:S,decodeUnsafe:A,decode:M}}var Ou=Cu,Fu=Ou,Nu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",me=Fu(Nu),ts={},qo={};(function(n){var t=Un.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=A;var e=t(On.exports),r=t(Fn.exports),s=t(Nn.exports),i=t(Pn.exports),a=t(Dn.exports),f=Ji.exports;function d(M){var E=v();return function(){var k=(0,a.default)(M),U;if(E){var z=(0,a.default)(this).constructor;U=Reflect.construct(k,arguments,z)}else U=k.apply(this,arguments);return(0,i.default)(this,U)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var S=function(M){(0,s.default)(R,M);var E=d(R);function R(k,U,z){var P;return(0,e.default)(this,R),P=E.call(this),P.socket=new window.WebSocket(k,z),P.socket.onopen=function(){return P.emit("open")},P.socket.onmessage=function(C){return P.emit("message",C.data)},P.socket.onerror=function(C){return P.emit("error",C)},P.socket.onclose=function(C){P.emit("close",C.code,C.reason)},P}return(0,r.default)(R,[{key:"send",value:function(U,z,P){var C=P||z;try{this.socket.send(U),C()}catch($){C($)}}},{key:"close",value:function(U,z){this.socket.close(U,z)}},{key:"addEventListener",value:function(U,z,P){this.socket.addEventListener(U,z,P)}}]),R}(f.EventEmitter);function A(M,E){return new S(M,E)}})(qo);var Ho={};(function(n){var t=Un.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(mu),r=t(Co.exports),s=t(Cn.exports),i=t(On.exports),a=t(Fn.exports),f=t(Nn.exports),d=t(Pn.exports),v=t(Dn.exports),S=Ji.exports;function A(k){var U=M();return function(){var P=(0,v.default)(k),C;if(U){var $=(0,v.default)(this).constructor;C=Reflect.construct(P,arguments,$)}else C=P.apply(this,arguments);return(0,d.default)(this,C)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var E=function(k,U){var z={};for(var P in k)Object.prototype.hasOwnProperty.call(k,P)&&U.indexOf(P)<0&&(z[P]=k[P]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,P=Object.getOwnPropertySymbols(k);C<P.length;C++)U.indexOf(P[C])<0&&Object.prototype.propertyIsEnumerable.call(k,P[C])&&(z[P[C]]=k[P[C]]);return z},R=function(k){(0,f.default)(z,k);var U=A(z);function z(P){var C,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},K=arguments.length>3?arguments[3]:void 0;(0,i.default)(this,z);var W=D.autoconnect,V=W===void 0?!0:W,mt=D.reconnect,Ot=mt===void 0?!0:mt,pt=D.reconnect_interval,Ft=pt===void 0?1e3:pt,y=D.max_reconnects,o=y===void 0?5:y,l=E(D,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return C=U.call(this),C.webSocketFactory=P,C.queue={},C.rpc_id=0,C.address=$,C.autoconnect=V,C.ready=!1,C.reconnect=Ot,C.reconnect_interval=Ft,C.max_reconnects=o,C.rest_options=l,C.current_reconnects=0,C.generate_request_id=K||function(){return++C.rpc_id},C.autoconnect&&C._connect(C.address,Object.assign({autoconnect:C.autoconnect,reconnect:C.reconnect,reconnect_interval:C.reconnect_interval,max_reconnects:C.max_reconnects},C.rest_options)),C}return(0,a.default)(z,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(C,$,D,K){var W=this;return!K&&(0,s.default)(D)==="object"&&(K=D,D=null),new Promise(function(V,mt){if(!W.ready)return mt(new Error("socket not ready"));var Ot=W.generate_request_id(C,$),pt={jsonrpc:"2.0",method:C,params:$||null,id:Ot};W.socket.send(JSON.stringify(pt),K,function(Ft){if(Ft)return mt(Ft);W.queue[Ot]={promise:[V,mt]},D&&(W.queue[Ot].timeout=setTimeout(function(){delete W.queue[Ot],mt(new Error("reply timeout"))},D))})})}},{key:"login",value:function(){var P=(0,r.default)(e.default.mark(function $(D){var K;return e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.call("rpc.login",D);case 2:if(K=V.sent,K){V.next=5;break}throw new Error("authentication failed");case 5:return V.abrupt("return",K);case 6:case"end":return V.stop()}},$,this)}));function C($){return P.apply(this,arguments)}return C}()},{key:"listMethods",value:function(){var P=(0,r.default)(e.default.mark(function $(){return e.default.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.call("__listMethods");case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},$,this)}));function C(){return P.apply(this,arguments)}return C}()},{key:"notify",value:function(C,$){var D=this;return new Promise(function(K,W){if(!D.ready)return W(new Error("socket not ready"));var V={jsonrpc:"2.0",method:C,params:$||null};D.socket.send(JSON.stringify(V),function(mt){if(mt)return W(mt);K()})})}},{key:"subscribe",value:function(){var P=(0,r.default)(e.default.mark(function $(D){var K;return e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof D=="string"&&(D=[D]),V.next=3,this.call("rpc.on",D);case 3:if(K=V.sent,!(typeof D=="string"&&K[D]!=="ok")){V.next=6;break}throw new Error("Failed subscribing to an event '"+D+"' with: "+K[D]);case 6:return V.abrupt("return",K);case 7:case"end":return V.stop()}},$,this)}));function C($){return P.apply(this,arguments)}return C}()},{key:"unsubscribe",value:function(){var P=(0,r.default)(e.default.mark(function $(D){var K;return e.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return typeof D=="string"&&(D=[D]),V.next=3,this.call("rpc.off",D);case 3:if(K=V.sent,!(typeof D=="string"&&K[D]!=="ok")){V.next=6;break}throw new Error("Failed unsubscribing from an event with: "+K);case 6:return V.abrupt("return",K);case 7:case"end":return V.stop()}},$,this)}));function C($){return P.apply(this,arguments)}return C}()},{key:"close",value:function(C,$){this.socket.close(C||1e3,$)}},{key:"_connect",value:function(C,$){var D=this;this.socket=this.webSocketFactory(C,$),this.socket.addEventListener("open",function(){D.ready=!0,D.emit("open"),D.current_reconnects=0}),this.socket.addEventListener("message",function(K){var W=K.data;W instanceof ArrayBuffer&&(W=Buffer.from(W).toString());try{W=JSON.parse(W)}catch{return}if(W.notification&&D.listeners(W.notification).length){if(!Object.keys(W.params).length)return D.emit(W.notification);var V=[W.notification];if(W.params.constructor===Object)V.push(W.params);else for(var mt=0;mt<W.params.length;mt++)V.push(W.params[mt]);return Promise.resolve().then(function(){D.emit.apply(D,V)})}if(!D.queue[W.id])return W.method&&W.params?Promise.resolve().then(function(){D.emit(W.method,W.params)}):void 0;"error"in W=="result"in W&&D.queue[W.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),D.queue[W.id].timeout&&clearTimeout(D.queue[W.id].timeout),W.error?D.queue[W.id].promise[1](W.error):D.queue[W.id].promise[0](W.result),delete D.queue[W.id]}),this.socket.addEventListener("error",function(K){return D.emit("error",K)}),this.socket.addEventListener("close",function(K){var W=K.code,V=K.reason;D.ready&&setTimeout(function(){return D.emit("close",W,V)},0),D.ready=!1,D.socket=void 0,W!==1e3&&(D.current_reconnects++,D.reconnect&&(D.max_reconnects>D.current_reconnects||D.max_reconnects===0)&&setTimeout(function(){return D._connect(C,$)},D.reconnect_interval))})}}]),z}(S.EventEmitter);n.default=R})(Ho);var wr=Un.exports;Object.defineProperty(ts,"__esModule",{value:!0});var $o=ts.Client=void 0,Pu=wr(Fn.exports),Du=wr(On.exports),zu=wr(Nn.exports),qu=wr(Pn.exports),Rs=wr(Dn.exports),Hu=wr(qo),$u=wr(Ho);function Ku(n){var t=Wu();return function(){var r=(0,Rs.default)(n),s;if(t){var i=(0,Rs.default)(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return(0,qu.default)(this,s)}}function Wu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gu=function(n){(0,zu.default)(e,n);var t=Ku(e);function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ws://localhost:8080",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.autoconnect,a=i===void 0?!0:i,f=s.reconnect,d=f===void 0?!0:f,v=s.reconnect_interval,S=v===void 0?1e3:v,A=s.max_reconnects,M=A===void 0?5:A,E=arguments.length>2?arguments[2]:void 0;return(0,Du.default)(this,e),t.call(this,Hu.default,r,{autoconnect:a,reconnect:d,reconnect_interval:S,max_reconnects:M},E)}return(0,Pu.default)(e)}($u.default);$o=ts.Client=Gu;Br.sha512Sync=(...n)=>za(Br.concatBytes(...n));Br.randomPrivateKey;function Ts(n){try{return Wt.fromHex(n,!0),!0}catch{return!1}}const ju=(n,t)=>Js.sign(n,t.slice(0,32)),Vu=Js.verify,Xr=n=>ht.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ht.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ht.Buffer.from(n);class Zu{constructor(t){Object.assign(this,t)}encode(){return ht.Buffer.from(so(un,this))}static decode(t){return oo(un,this,t)}static decodeUnchecked(t){return to(un,this,t)}}const un=new Map,Xu=32,Xe=32;function Yu(n){return n._bn!==void 0}let Ls=1;class st extends Zu{constructor(t){if(super({}),this._bn=void 0,Yu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=me.decode(t);if(e.length!=Xe)throw new Error("Invalid public key input");this._bn=new ms(e)}else this._bn=new ms(t);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}static unique(){const t=new st(Ls);return Ls+=1,new st(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return me.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){const t=this._bn.toArrayLike(ht.Buffer);if(t.length===Xe)return t;const e=ht.Buffer.alloc(32);return t.copy(e,32-t.length),e}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=ht.Buffer.concat([t.toBuffer(),ht.Buffer.from(e),r.toBuffer()]),i=ws(s);return new st(i)}static createProgramAddressSync(t,e){let r=ht.Buffer.alloc(0);t.forEach(function(i){if(i.length>Xu)throw new TypeError("Max seed length exceeded");r=ht.Buffer.concat([r,Xr(i)])}),r=ht.Buffer.concat([r,e.toBuffer(),ht.Buffer.from("ProgramDerivedAddress")]);const s=ws(r);if(Ts(s))throw new Error("Invalid seeds, address must fall off the curve");return new st(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(ht.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new st(t);return Ts(e.toBytes())}}st.default=new st("11111111111111111111111111111111");un.set(st,{kind:"struct",fields:[["_bn","u256"]]});new st("BPFLoader1111111111111111111111111111111111");const Sr=1280-40-8,Ko=127,Li=64;class Wo extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Wo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Go extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Go.prototype,"name",{value:"TransactionExpiredTimeoutError"});class _n{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const s=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const dt=(n="publicKey")=>$t(32,n),xr=(n="string")=>{const t=J([rt("length"),rt("lengthPadding"),$t(pr(rt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,a)=>e(i,a).chars.toString(),s.encode=(i,a,f)=>{const d={chars:ht.Buffer.from(i,"utf8")};return r(d,a,f)},s.alloc=i=>rt().span+rt().span+ht.Buffer.from(i,"utf8").length,s},Ju=(n="authorized")=>J([dt("staker"),dt("withdrawer")],n),Qu=(n="lockup")=>J([Re("unixTimestamp"),Re("epoch"),dt("custodian")],n),tf=(n="voteInit")=>J([dt("nodePubkey"),dt("authorizedVoter"),dt("authorizedWithdrawer"),vt("commission")],n),ef=(n="voteAuthorizeWithSeedArgs")=>J([rt("voteAuthorizationType"),dt("currentAuthorityDerivedKeyOwnerPubkey"),xr("currentAuthorityDerivedKeySeed"),dt("newAuthorized")],n);function Ce(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Oe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function fe(n,t){if(!n)throw new Error(t||"Assertion failed")}class qn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=a=>{const f=a.toBase58();let d=r.get(f);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){s(a.programId).isInvoked=!0;for(const f of a.keys){const d=s(f.pubkey);d.isSigner||(d.isSigner=f.isSigner),d.isWritable||(d.isWritable=f.isWritable)}}return new qn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];fe(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{fe(e.length>0,"Expected at least one writable signer key");const[d]=e[0];fe(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const f=[...e.map(([d])=>new st(d)),...r.map(([d])=>new st(d)),...s.map(([d])=>new st(d)),...i.map(([d])=>new st(d))];return[a,f]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const f=new st(i),d=t.findIndex(v=>v.equals(f));d>=0&&(fe(d<256,"Max lookup table index exceeded"),r.push(d),s.push(f),this.keyMetaMap.delete(i))}return[r,s]}}class fr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new st(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:me.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new _n(this.staticAccountKeys)}static compile(t){const e=qn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),a=new _n(s).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:me.encode(f.data)}));return new fr({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Oe(e,t);const r=this.instructions.map(A=>{const{accounts:M,programIdIndex:E}=A,R=Array.from(me.decode(A.data));let k=[];Oe(k,M.length);let U=[];return Oe(U,R.length),{programIdIndex:E,keyIndicesCount:ht.Buffer.from(k),keyIndices:M,dataLength:ht.Buffer.from(U),data:R}});let s=[];Oe(s,r.length);let i=ht.Buffer.alloc(Sr);ht.Buffer.from(s).copy(i);let a=s.length;r.forEach(A=>{a+=J([vt("programIdIndex"),$t(A.keyIndicesCount.length,"keyIndicesCount"),Ae(vt("keyIndex"),A.keyIndices.length,"keyIndices"),$t(A.dataLength.length,"dataLength"),Ae(vt("userdatum"),A.data.length,"data")]).encode(A,i,a)}),i=i.slice(0,a);const f=J([$t(1,"numRequiredSignatures"),$t(1,"numReadonlySignedAccounts"),$t(1,"numReadonlyUnsignedAccounts"),$t(e.length,"keyCount"),Ae(dt("key"),t,"keys"),dt("recentBlockhash")]),d={numRequiredSignatures:ht.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ht.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ht.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ht.Buffer.from(e),keys:this.accountKeys.map(A=>Xr(A.toBytes())),recentBlockhash:me.decode(this.recentBlockhash)};let v=ht.Buffer.alloc(2048);const S=f.encode(d,v);return i.copy(v,S),v.slice(0,S+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Ko))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=e.shift(),i=e.shift(),a=Ce(e);let f=[];for(let M=0;M<a;M++){const E=e.slice(0,Xe);e=e.slice(Xe),f.push(new st(ht.Buffer.from(E)))}const d=e.slice(0,Xe);e=e.slice(Xe);const v=Ce(e);let S=[];for(let M=0;M<v;M++){const E=e.shift(),R=Ce(e),k=e.slice(0,R);e=e.slice(R);const U=Ce(e),z=e.slice(0,U),P=me.encode(ht.Buffer.from(z));e=e.slice(U),S.push({programIdIndex:E,accounts:k,data:P})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:me.encode(ht.Buffer.from(d)),accountKeys:f,instructions:S};return new fr(A)}}class Sn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new _n(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=qn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const A=e.extractTableLookup(S);if(A!==void 0){const[M,{writable:E,readonly:R}]=A;r.push(M),s.writable.push(...E),s.readonly.push(...R)}}const[a,f]=e.getMessageComponents(),v=new _n(f,s).compileInstructions(t.instructions);return new Sn({header:a,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:v,addressTableLookups:r})}serialize(){const t=Array();Oe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Oe(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Oe(i,this.addressTableLookups.length);const a=J([vt("prefix"),J([vt("numRequiredSignatures"),vt("numReadonlySignedAccounts"),vt("numReadonlyUnsignedAccounts")],"header"),$t(t.length,"staticAccountKeysLength"),Ae(dt(),this.staticAccountKeys.length,"staticAccountKeys"),dt("recentBlockhash"),$t(r.length,"instructionsLength"),$t(e.length,"serializedInstructions"),$t(i.length,"addressTableLookupsLength"),$t(s.length,"serializedAddressTableLookups")]),f=new Uint8Array(Sr),d=1<<7,v=a.encode({prefix:d,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:me.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},f);return f.slice(0,v)}serializeInstructions(){let t=0;const e=new Uint8Array(Sr);for(const r of this.compiledInstructions){const s=Array();Oe(s,r.accountKeyIndexes.length);const i=Array();Oe(i,r.data.length),t+=J([vt("programIdIndex"),$t(s.length,"encodedAccountKeyIndexesLength"),Ae(vt(),r.accountKeyIndexes.length,"accountKeyIndexes"),$t(i.length,"encodedDataLength"),$t(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Sr);for(const r of this.addressTableLookups){const s=Array();Oe(s,r.writableIndexes.length);const i=Array();Oe(i,r.readonlyIndexes.length),t+=J([dt("accountKey"),$t(s.length,"encodedWritableIndexesLength"),Ae(vt(),r.writableIndexes.length,"writableIndexes"),$t(i.length,"encodedReadonlyIndexesLength"),Ae(vt(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),s=r&Ko;fe(r!==s,"Expected versioned message but received legacy message");const i=s;fe(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},f=[],d=Ce(e);for(let R=0;R<d;R++)f.push(new st(e.splice(0,Xe)));const v=me.encode(e.splice(0,Xe)),S=Ce(e),A=[];for(let R=0;R<S;R++){const k=e.shift(),U=Ce(e),z=e.splice(0,U),P=Ce(e),C=new Uint8Array(e.splice(0,P));A.push({programIdIndex:k,accountKeyIndexes:z,data:C})}const M=Ce(e),E=[];for(let R=0;R<M;R++){const k=new st(e.splice(0,Xe)),U=Ce(e),z=e.splice(0,U),P=Ce(e),C=e.splice(0,P);E.push({accountKey:k,writableIndexes:z,readonlyIndexes:C})}return new Sn({header:a,staticAccountKeys:f,recentBlockhash:v,compiledInstructions:A,addressTableLookups:E})}}let ir;(function(n){n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT"})(ir||(ir={}));const rf=ht.Buffer.alloc(Li).fill(0);class Us{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ht.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class sr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Us(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<e.length;k++)if(e[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const s=[],i=[];e.forEach(k=>{k.keys.forEach(z=>{i.push({...z})});const U=k.programId.toString();s.includes(U)||s.push(U)}),s.forEach(k=>{i.push({pubkey:new st(k),isSigner:!1,isWritable:!1})});const a=[];i.forEach(k=>{const U=k.pubkey.toString(),z=a.findIndex(P=>P.pubkey.toString()===U);z>-1?(a[z].isWritable=a[z].isWritable||k.isWritable,a[z].isSigner=a[z].isSigner||k.isSigner):a.push(k)}),a.sort(function(k,U){return k.isSigner!==U.isSigner?k.isSigner?-1:1:k.isWritable!==U.isWritable?k.isWritable?-1:1:k.pubkey.toBase58().localeCompare(U.pubkey.toBase58())});const f=a.findIndex(k=>k.pubkey.equals(r));if(f>-1){const[k]=a.splice(f,1);k.isSigner=!0,k.isWritable=!0,a.unshift(k)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const k of this.signatures){const U=a.findIndex(z=>z.pubkey.equals(k.publicKey));if(U>-1)a[U].isSigner||(a[U].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let d=0,v=0,S=0;const A=[],M=[];a.forEach(({pubkey:k,isSigner:U,isWritable:z})=>{U?(A.push(k.toString()),d+=1,z||(v+=1)):(M.push(k.toString()),z||(S+=1))});const E=A.concat(M),R=e.map(k=>{const{data:U,programId:z}=k;return{programIdIndex:E.indexOf(z.toString()),accounts:k.keys.map(P=>E.indexOf(P.pubkey.toString())),data:me.encode(U)}});return R.forEach(k=>{fe(k.programIdIndex>=0),k.accounts.forEach(U=>fe(U>=0))}),new fr({header:{numRequiredSignatures:d,numReadonlySignedAccounts:v,numReadonlyUnsignedAccounts:S},accountKeys:E,recentBlockhash:t,instructions:R})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=ju(r,s.secretKey);this._addSignature(s.publicKey,Xr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){fe(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=ht.Buffer.from(e)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(t,e){for(const{signature:r,publicKey:s}of this.signatures)if(r===null){if(e)return!1}else if(!Vu(r,t,s.toBuffer()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r&&!this._verifySignatures(s,e))throw new Error("Signature verification failed");return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Oe(r,e.length);const s=r.length+e.length*64+t.length,i=ht.Buffer.alloc(s);return fe(e.length<256),ht.Buffer.from(r).copy(i,0),e.forEach(({signature:a},f)=>{a!==null&&(fe(a.length===64,"signature has invalid length"),ht.Buffer.from(a).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),fe(i.length<=Sr,`Transaction too large: ${i.length} > ${Sr}`),i}get keys(){return fe(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return fe(this.instructions.length===1),this.instructions[0].programId}get data(){return fe(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ce(e);let s=[];for(let i=0;i<r;i++){const a=e.slice(0,Li);e=e.slice(Li),s.push(me.encode(ht.Buffer.from(a)))}return sr.populate(fr.from(e),s)}static populate(t,e=[]){const r=new sr;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const a={signature:s==me.encode(rf)?null:me.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(s=>{const i=s.accounts.map(a=>{const f=t.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(d=>d.publicKey.toString()===f.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new Us({keys:i,programId:t.accountKeys[s.programIdIndex],data:me.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}new st("SysvarC1ock11111111111111111111111111111111");new st("SysvarEpochSchedu1e111111111111111111111111");new st("Sysvar1nstructions1111111111111111111111111");new st("SysvarRecentB1ockHashes11111111111111111111");new st("SysvarRent111111111111111111111111111111111");new st("SysvarRewards111111111111111111111111111111");new st("SysvarS1otHashes111111111111111111111111111");new st("SysvarS1otHistory11111111111111111111111111");new st("SysvarStakeHistory1111111111111111111111111");function fn(n){return new Promise(t=>setTimeout(t,n))}const nf=ge("lamportsPerSignature"),jo=J([rt("version"),rt("state"),dt("authorizedPubkey"),dt("nonce"),J([nf],"feeCalculator")]);jo.span;class es{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=jo.decode(Xr(t),0);return new es({authorizedPubkey:new st(e.authorizedPubkey),nonce:new st(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const sf=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},of=n=>t=>{const e=$t(n,t),{encode:r,decode:s}=sf(e),i=e;return i.decode=(a,f)=>{const d=s(a,f);return Tc(ht.Buffer.from(d))},i.encode=(a,f,d)=>{const v=Cc(a,n);return r(v,f,d)},i},Ar=of(8);Object.freeze({Create:{index:0,layout:J([rt("instruction"),Re("lamports"),Re("space"),dt("programId")])},Assign:{index:1,layout:J([rt("instruction"),dt("programId")])},Transfer:{index:2,layout:J([rt("instruction"),Ar("lamports")])},CreateWithSeed:{index:3,layout:J([rt("instruction"),dt("base"),xr("seed"),Re("lamports"),Re("space"),dt("programId")])},AdvanceNonceAccount:{index:4,layout:J([rt("instruction")])},WithdrawNonceAccount:{index:5,layout:J([rt("instruction"),Re("lamports")])},InitializeNonceAccount:{index:6,layout:J([rt("instruction"),dt("authorized")])},AuthorizeNonceAccount:{index:7,layout:J([rt("instruction"),dt("authorized")])},Allocate:{index:8,layout:J([rt("instruction"),Re("space")])},AllocateWithSeed:{index:9,layout:J([rt("instruction"),dt("base"),xr("seed"),Re("space"),dt("programId")])},AssignWithSeed:{index:10,layout:J([rt("instruction"),dt("base"),xr("seed"),dt("programId")])},TransferWithSeed:{index:11,layout:J([rt("instruction"),Ar("lamports"),xr("seed"),dt("programId")])},UpgradeNonceAccount:{index:12,layout:J([rt("instruction")])}});new st("11111111111111111111111111111111");new st("BPFLoader2111111111111111111111111111111111");var af=Object.prototype.toString,cf=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function Ur(n,t){var e,r,s,i,a,f,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return Ur(n.toJSON(),t);if(d=af.call(n),d==="[object Array]"){for(s="[",r=n.length-1,e=0;e<r;e++)s+=Ur(n[e],!0)+",";return r>-1&&(s+=Ur(n[e],!0)),s+"]"}else if(d==="[object Object]"){for(i=cf(n).sort(),r=i.length,s="",e=0;e<r;)a=i[e],f=Ur(n[a],!1),f!==void 0&&(s&&(s+=","),s+=JSON.stringify(a)+":"+f),e++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var uf=function(n){var t=Ur(n,!1);if(t!==void 0)return""+t},ff=uf;const Lr=32;function xi(n){let t=0;for(;n>1;)n/=2,t++;return t}function hf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class lf{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=xi(hf(t+Lr+1))-xi(Lr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Lr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Lr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+xi(Lr)):this.slotsPerEpoch}}class Cs extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class tt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var df=globalThis.fetch;const pf=160,gf=64,yf=pf/gf,mf=1e3/yf;function wf(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Os=56;class Fs{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=wf(bf,t),r=t.length-Os;fe(r>=0,"lookup table is invalid"),fe(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=J([Ae(dt(),s,"addresses")]).decode(t.slice(Os));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new st(e.authority[0]):void 0,addresses:i.map(a=>new st(a))}}}const bf={index:1,layout:J([rt("typeIndex"),Ar("deactivationSlot"),ge("lastExtendedSlot"),vt("lastExtendedStartIndex"),vt(),Ae(dt(),pr(vt(),-1),"authority")])},vf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function xf(n){const t=n.match(vf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,a=n.startsWith("https:")?"wss:":"ws:",f=s==null?null:parseInt(s.slice(1),10),d=f==null?"":`:${f+1}`;return`${a}//${r}${d}${i}`}var _i;const le=Zr(Xi(st),G(),n=>new st(n)),Vo=Yi([G(),Ct("base64")]),rs=Zr(Xi(ht.Buffer),Vo,n=>ht.Buffer.from(n[0],"base64")),_f=30*1e3;function Sf(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ht(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Zo(n){return ke([H({jsonrpc:Ct("2.0"),id:G(),result:n}),H({jsonrpc:Ct("2.0"),id:G(),error:H({code:Vr(),message:G(),data:ft(Hc())})})])}const Bf=Zo(Vr());function gt(n){return Zr(Zo(n),Bf,t=>"error"in t?t:{...t,result:j(t.result,n)})}function de(n){return gt(H({context:H({slot:F()}),value:n}))}function Hn(n){return H({context:H({slot:F()}),value:n})}function Si(n,t){return n===0?new Sn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new st(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:me.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new fr(t)}const Ef=H({foundation:F(),foundationTerm:F(),initial:F(),taper:F(),terminal:F()}),Af=gt(Z(Q(H({epoch:F(),effectiveSlot:F(),amount:F(),postBalance:F()})))),If=H({epoch:F(),slotIndex:F(),slotsInEpoch:F(),absoluteSlot:F(),blockHeight:ft(F()),transactionCount:ft(F())}),kf=H({slotsPerEpoch:F(),leaderScheduleSlotOffset:F(),warmup:Ye(),firstNormalEpoch:F(),firstNormalSlot:F()}),Mf=Io(G(),Z(F())),br=Q(ke([H({}),G()])),Rf=H({err:br}),Tf=Ct("receivedSignature"),Lf=H({"solana-core":G(),"feature-set":ft(F())}),Ns=de(H({err:Q(ke([H({}),G()])),logs:Q(Z(G())),accounts:ft(Q(Z(Q(H({executable:Ye(),owner:G(),lamports:F(),data:Z(G()),rentEpoch:ft(F())}))))),unitsConsumed:ft(F()),returnData:ft(Q(H({programId:G(),data:Yi([G(),Ct("base64")])})))})),Uf=de(H({byIdentity:Io(G(),Z(F())),range:H({firstSlot:F(),lastSlot:F()})}));function Cf(n,t,e,r,s){const i=e||df;let a;return r&&(a=async(d,v)=>{const S=await new Promise((A,M)=>{try{r(d,v,(E,R)=>A([E,R]))}catch(E){M(E)}});return await i(...S)}),new yu(async(d,v)=>{const A={method:"POST",body:d,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},kh)};try{let M=5,E,R=500;for(;a?E=await a(n,A):E=await i(n,A),!(E.status!==429||s===!0||(M-=1,M===0));)console.log(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${R}ms delay...`),await fn(R),R*=2;const k=await E.text();E.ok?v(null,k):v(new Error(`${E.status} ${E.statusText}: ${k}`))}catch(M){M instanceof Error&&v(M)}finally{}},{})}function Of(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,a)=>{if(i){s(i);return}r(a)})})}function Ff(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,a)=>{if(i){r(i);return}e(a)})})}const Nf=gt(Ef),Pf=gt(If),Df=gt(kf),zf=gt(Mf),qf=gt(F()),Hf=de(H({total:F(),circulating:F(),nonCirculating:F(),nonCirculatingAccounts:Z(le)})),Ui=H({amount:G(),uiAmount:Q(F()),decimals:F(),uiAmountString:ft(G())}),$f=de(Z(H({address:le,amount:G(),uiAmount:Q(F()),decimals:F(),uiAmountString:ft(G())}))),Kf=de(Z(H({pubkey:le,account:H({executable:Ye(),owner:le,lamports:F(),data:rs,rentEpoch:F()})}))),Ci=H({program:G(),parsed:Vr(),space:F()}),Wf=de(Z(H({pubkey:le,account:H({executable:Ye(),owner:le,lamports:F(),data:Ci,rentEpoch:F()})}))),Gf=de(Z(H({lamports:F(),address:le}))),Hr=H({executable:Ye(),owner:le,lamports:F(),data:rs,rentEpoch:F()}),jf=H({pubkey:le,account:Hr}),Vf=Zr(ke([Xi(ht.Buffer),Ci]),ke([Vo,Ci]),n=>Array.isArray(n)?j(n,rs):n),Xo=H({executable:Ye(),owner:le,lamports:F(),data:Vf,rentEpoch:F()}),Zf=H({pubkey:le,account:Xo}),Xf=H({state:ke([Ct("active"),Ct("inactive"),Ct("activating"),Ct("deactivating")]),active:F(),inactive:F()}),Yf=gt(Z(H({signature:G(),slot:F(),err:br,memo:Q(G()),blockTime:ft(Q(F()))}))),Jf=gt(Z(H({signature:G(),slot:F(),err:br,memo:Q(G()),blockTime:ft(Q(F()))}))),Qf=H({subscription:F(),result:Hn(Hr)}),th=H({pubkey:le,account:Hr}),eh=H({subscription:F(),result:Hn(th)}),rh=H({parent:F(),slot:F(),root:F()}),nh=H({subscription:F(),result:rh}),ih=ke([H({type:ke([Ct("firstShredReceived"),Ct("completed"),Ct("optimisticConfirmation"),Ct("root")]),slot:F(),timestamp:F()}),H({type:Ct("createdBank"),parent:F(),slot:F(),timestamp:F()}),H({type:Ct("frozen"),slot:F(),timestamp:F(),stats:H({numTransactionEntries:F(),numSuccessfulTransactions:F(),numFailedTransactions:F(),maxTransactionsPerEntry:F()})}),H({type:Ct("dead"),slot:F(),timestamp:F(),err:G()})]),sh=H({subscription:F(),result:ih}),oh=H({subscription:F(),result:Hn(ke([Rf,Tf]))}),ah=H({subscription:F(),result:F()}),ch=H({pubkey:G(),gossip:Q(G()),tpu:Q(G()),rpc:Q(G()),version:Q(G())}),Ps=H({votePubkey:G(),nodePubkey:G(),activatedStake:F(),epochVoteAccount:Ye(),epochCredits:Z(Yi([F(),F(),F()])),commission:F(),lastVote:F(),rootSlot:Q(F())}),uh=gt(H({current:Z(Ps),delinquent:Z(Ps)})),fh=ke([Ct("processed"),Ct("confirmed"),Ct("finalized")]),hh=H({slot:F(),confirmations:Q(F()),err:br,confirmationStatus:ft(fh)}),lh=de(Z(Q(hh))),dh=gt(F()),Yo=H({accountKey:le,writableIndexes:Z(F()),readonlyIndexes:Z(F())}),ns=H({signatures:Z(G()),message:H({accountKeys:Z(G()),header:H({numRequiredSignatures:F(),numReadonlySignedAccounts:F(),numReadonlyUnsignedAccounts:F()}),instructions:Z(H({accounts:Z(F()),data:G(),programIdIndex:F()})),recentBlockhash:G(),addressTableLookups:ft(Z(Yo))})}),Jo=H({parsed:Vr(),program:G(),programId:le}),Qo=H({accounts:Z(le),data:G(),programId:le}),ph=ke([Qo,Jo]),gh=ke([H({parsed:Vr(),program:G(),programId:G()}),H({accounts:Z(G()),data:G(),programId:G()})]),ta=Zr(ph,gh,n=>"accounts"in n?j(n,Qo):j(n,Jo)),ea=H({signatures:Z(G()),message:H({accountKeys:Z(H({pubkey:le,signer:Ye(),writable:Ye(),source:ft(ke([Ct("transaction"),Ct("lookupTable")]))})),instructions:Z(ta),recentBlockhash:G(),addressTableLookups:ft(Q(Z(Yo)))})}),Bn=H({accountIndex:F(),mint:G(),owner:ft(G()),uiTokenAmount:Ui}),ra=H({writable:Z(le),readonly:Z(le)}),is=H({err:br,fee:F(),innerInstructions:ft(Q(Z(H({index:F(),instructions:Z(H({accounts:Z(F()),data:G(),programIdIndex:F()}))})))),preBalances:Z(F()),postBalances:Z(F()),logMessages:ft(Q(Z(G()))),preTokenBalances:ft(Q(Z(Bn))),postTokenBalances:ft(Q(Z(Bn))),loadedAddresses:ft(ra),computeUnitsConsumed:ft(F())}),na=H({err:br,fee:F(),innerInstructions:ft(Q(Z(H({index:F(),instructions:Z(ta)})))),preBalances:Z(F()),postBalances:Z(F()),logMessages:ft(Q(Z(G()))),preTokenBalances:ft(Q(Z(Bn))),postTokenBalances:ft(Q(Z(Bn))),loadedAddresses:ft(ra),computeUnitsConsumed:ft(F())}),$n=ke([Ct(0),Ct("legacy")]),yh=gt(Q(H({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:Z(H({transaction:ns,meta:Q(is),version:ft($n)})),rewards:ft(Z(H({pubkey:G(),lamports:F(),postBalance:Q(F()),rewardType:Q(G())}))),blockTime:Q(F()),blockHeight:Q(F())}))),mh=gt(Q(H({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:Z(H({transaction:ea,meta:Q(na),version:ft($n)})),rewards:ft(Z(H({pubkey:G(),lamports:F(),postBalance:Q(F()),rewardType:Q(G())}))),blockTime:Q(F()),blockHeight:Q(F())}))),wh=gt(Q(H({blockhash:G(),previousBlockhash:G(),parentSlot:F(),transactions:Z(H({transaction:ns,meta:Q(is)})),rewards:ft(Z(H({pubkey:G(),lamports:F(),postBalance:Q(F()),rewardType:Q(G())}))),blockTime:Q(F())}))),Ds=gt(Q(H({blockhash:G(),previousBlockhash:G(),parentSlot:F(),signatures:Z(G()),blockTime:Q(F())}))),Bi=gt(Q(H({slot:F(),meta:is,blockTime:ft(Q(F())),transaction:ns,version:ft($n)}))),on=gt(Q(H({slot:F(),transaction:ea,meta:Q(na),blockTime:ft(Q(F())),version:ft($n)}))),bh=de(H({blockhash:G(),feeCalculator:H({lamportsPerSignature:F()})})),vh=de(H({blockhash:G(),lastValidBlockHeight:F()})),xh=H({slot:F(),numTransactions:F(),numSlots:F(),samplePeriodSecs:F()}),_h=gt(Z(xh)),Sh=de(Q(H({feeCalculator:H({lamportsPerSignature:F()})}))),Bh=gt(G()),Eh=gt(G()),Ah=H({err:br,logs:Z(G()),signature:G()}),Ih=H({result:Hn(Ah),subscription:F()}),kh={"solana-client":`js/${(_i="0.0.0-development")!==null&&_i!==void 0?_i:"UNKNOWN"}`};class Mh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r,s,i,a,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,f=e.disableRetryOnRateLimit),this._rpcEndpoint=Sf(t),this._rpcWsEndpoint=r||xf(t),this._rpcClient=Cf(t,s,i,a,f),this._rpcRequest=Of(this._rpcClient),this._rpcBatchRequest=Ff(this._rpcClient),this._rpcWebSocket=new $o(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",i),f=j(a,de(F()));if("error"in f)throw new tt(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=j(e,gt(Q(F())));if("error"in r)throw new tt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=j(t,gt(F()));if("error"in e)throw new tt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=j(t,qf);if("error"in e)throw new tt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=j(r,Hf);if("error"in s)throw new tt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=j(s,de(Ui));if("error"in i)throw new tt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=j(s,de(Ui));if("error"in i)throw new tt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ht(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const f=this._buildArgs(a,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",f),v=j(d,Kf);if("error"in v)throw new tt(v.error,`failed to get token accounts owned by account ${t.toBase58()}`);return v.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),f=j(a,Wf);if("error"in f)throw new tt(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=j(s,Gf);if("error"in i)throw new tt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=j(s,$f);if("error"in i)throw new tt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",i),f=j(a,de(Q(Hr)));if("error"in f)throw new tt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",i),f=j(a,de(Q(Xo)));if("error"in f)throw new tt(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(v=>v.toBase58()),a=this._buildArgs([i],r,"base64",s),f=await this._rpcRequest("getMultipleAccounts",a),d=j(f,de(Z(Q(Hr))));if("error"in d)throw new tt(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ht(e),a=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),f=await this._rpcRequest("getStakeActivation",a),d=j(f,gt(Xf));if("error"in d)throw new tt(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),{encoding:i,...a}=s||{},f=this._buildArgs([t.toBase58()],r,i||"base64",a),d=await this._rpcRequest("getProgramAccounts",f),v=j(d,gt(Z(jf)));if("error"in v)throw new tt(v.error,`failed to get accounts owned by program ${t.toBase58()}`);return v.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",i),f=j(a,gt(Z(Zf)));if("error"in f)throw new tt(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;typeof t=="string"?r=t:r=t.signature;let s;try{s=me.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}fe(s.length===64,"signature has invalid length");const i=e||this.commitment;let a,f,d=!1;const v=new Promise((M,E)=>{try{f=this.onSignature(r,(R,k)=>{f=void 0;const U={context:k,value:R};d=!0,M({__type:ir.PROCESSED,response:U})},i)}catch(R){E(R)}}),S=new Promise(M=>{if(typeof t=="string"){let E=this._confirmTransactionInitialTimeout||6e4;switch(i){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{E=this._confirmTransactionInitialTimeout||30*1e3;break}}a=setTimeout(()=>M({__type:ir.TIMED_OUT,timeoutMs:E}),E)}else{let E=t;const R=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let k=await R();if(!d){for(;k<=E.lastValidBlockHeight;)if(await fn(1e3),d||(k=await R(),d))return;M({__type:ir.BLOCKHEIGHT_EXCEEDED})}})()}});let A;try{const M=await Promise.race([v,S]);switch(M.__type){case ir.BLOCKHEIGHT_EXCEEDED:throw new Wo(r);case ir.PROCESSED:A=M.response;break;case ir.TIMED_OUT:throw new Go(r,M.timeoutMs/1e3)}}finally{clearTimeout(a),f&&this.removeSignatureListener(f)}return A}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=j(t,gt(Z(ch)));if("error"in e)throw new tt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=j(r,uh);if("error"in s)throw new tt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),a=j(i,gt(F()));if("error"in a)throw new tt(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),a=j(i,gt(G()));if("error"in a)throw new tt(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=j(s,gt(Z(le)));if("error"in i)throw new tt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);fe(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=j(s,lh);if("error"in i)throw new tt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),a=j(i,gt(F()));if("error"in a)throw new tt(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=j(r,Nf);if("error"in s)throw new tt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ht(r),a=this._buildArgs([t.map(v=>v.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),f=await this._rpcRequest("getInflationReward",a),d=j(f,Af);if("error"in d)throw new tt(d.error,"failed to get inflation reward");return d.result}async getEpochInfo(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),a=j(i,Pf);if("error"in a)throw new tt(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=j(t,Df);if("error"in e)throw new tt(e.error,"failed to get epoch schedule");const r=e.result;return new lf(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=j(t,zf);if("error"in e)throw new tt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=j(s,dh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),s=j(r,bh);if("error"in s)throw new tt(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=j(e,_h);if("error"in r)throw new tt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=j(s,Sh);if("error"in i)throw new tt(i.error,"failed to get fee calculator");const{context:a,value:f}=i.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){const r=t.serialize().toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),a=j(i,de(Q(F())));if("error"in a)throw new tt(a.error,"failed to get slot");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),a=j(i,vh);if("error"in a)throw new tt(a.error,"failed to get latest blockhash");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=j(t,gt(Lf));if("error"in e)throw new tt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=j(t,gt(G()));if("error"in e)throw new tt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getBlock",i),f=j(a,yh);if("error"in f)throw new tt(f.error,"failed to get confirmed block");const d=f.result;return d&&{...d,transactions:d.transactions.map(({transaction:v,meta:S,version:A})=>({meta:S,transaction:{...v,message:Si(A,v.message)},version:A}))}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",i),f=j(a,mh);if("error"in f)throw new tt(f.error,"failed to get block");return f.result}async getBlockHeight(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getBlockHeight",s),a=j(i,gt(F()));if("error"in a)throw new tt(a.error,"failed to get block height information");return a.result}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:f,...d}=t;r=f,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),a=j(i,Uf);if("error"in a)throw new tt(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getTransaction",i),f=j(a,Bi);if("error"in f)throw new tt(f.error,"failed to get transaction");const d=f.result;return d&&{...d,transaction:{...d.transaction,message:Si(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",i),f=j(a,on);if("error"in f)throw new tt(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(d=>{const v=this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s);return{methodName:"getTransaction",args:v}});return(await this._rpcBatchRequest(i)).map(d=>{const v=j(d,on);if("error"in v)throw new tt(v.error,"failed to get transactions");return v.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(d=>{const v=this._buildArgsAtLeastConfirmed([d],r,void 0,s);return{methodName:"getTransaction",args:v}});return(await this._rpcBatchRequest(i)).map(d=>{const v=j(d,Bi);if("error"in v)throw new tt(v.error,"failed to get transactions");const S=v.result;return S&&{...S,transaction:{...S.transaction,message:Si(S.version,S.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedBlock",r),i=j(s,wh);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const f={...a,transactions:a.transactions.map(({transaction:d,meta:v})=>{const S=new fr(d.message);return{meta:v,transaction:{...d,message:S}}})};return{...f,transactions:f.transactions.map(({transaction:d,meta:v})=>({meta:v,transaction:sr.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),a=j(i,gt(Z(F())));if("error"in a)throw new tt(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=j(s,Ds);if("error"in i)throw new tt(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",r),i=j(s,Ds);if("error"in i)throw new tt(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getConfirmedTransaction",r),i=j(s,Bi);if("error"in i)throw new tt(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const f=new fr(a.transaction.message),d=a.transaction.signatures;return{...a,transaction:sr.populate(f,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",r),i=j(s,on);if("error"in i)throw new tt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>{const f=this._buildArgsAtLeastConfirmed([a],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:f}});return(await this._rpcBatchRequest(r)).map(a=>{const f=j(a,on);if("error"in f)throw new tt(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=j(i,Yf);if("error"in a)throw new tt(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),a=j(i,Jf);if("error"in a)throw new tt(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Fs({key:t,state:Fs.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=es.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=j(r,Bh);if("error"in s)throw new tt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await fn(100);const r=Date.now()-this._blockhashInfo.lastFetch>=_f;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await fn(mf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),a=j(i,de(F()));if("error"in a)throw new tt(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const k=t.serialize(),U=ht.Buffer.from(k).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const z=e||{};z.encoding="base64","commitment"in z||(z.commitment=this.commitment);const P=[U,z],C=await this._rpcRequest("simulateTransaction",P),$=j(C,Ns);if("error"in $)throw new Error("failed to simulate transaction: "+$.error.message);return $.result}let s;if(t instanceof sr){let R=t;s=new sr,s.feePayer=R.feePayer,s.instructions=t.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=sr.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const k=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=k.lastValidBlockHeight,s.recentBlockhash=k.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const U=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(U)&&!this._blockhashInfo.transactionSignatures.includes(U)){this._blockhashInfo.simulatedSignatures.push(U);break}else R=!0}}const a=s._compile(),f=a.serialize(),v=s._serialize(f).toString("base64"),S={encoding:"base64",commitment:this.commitment};if(r){const R=(Array.isArray(r)?r:a.nonProgramIds()).map(k=>k.toBase58());S.accounts={encoding:"base64",addresses:R}}i&&(S.sigVerify=!0);const A=[v,S],M=await this._rpcRequest("simulateTransaction",A),E=j(M,Ns);if("error"in E){let R;if("data"in E.error&&(R=E.error.data.logs,R&&Array.isArray(R))){const k=`
    `,U=k+R.join(k);console.error(E.error.message,U)}throw new Cs("failed to simulate transaction: "+E.error.message,R)}return E.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,r)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){const f=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))a=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Xr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const a=[t,r],f=await this._rpcRequest("sendTransaction",a),d=j(f,Eh);if("error"in d){let v;throw"data"in d.error&&(v=d.error.data.logs),new Cs("failed to send transaction: "+d.error.message,v)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{this._rpcWebSocket.notify("ping").catch(()=>{})},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration++,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._subscriptionsByHash[e]={...r,state:"pending"}})}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=s;try{this._subscriptionsByHash[r]={...s,state:"subscribing"};const f=await this._rpcWebSocket.call(a,i);this._subscriptionsByHash[r]={...s,serverSubscriptionId:f,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[f]=s.callbacks,await this._updateSubscriptions()}catch(f){if(f instanceof Error&&console.error(`${a} error for argument`,i,f.message),!e())return;this._subscriptionsByHash[r]={...s,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._subscriptionsByHash[r]={...s,state:"unsubscribing"};try{await this._rpcWebSocket.call(a,[i])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!e())return;this._subscriptionsByHash[r]={...s,state:"subscribed"},await this._updateSubscriptions();return}}this._subscriptionsByHash[r]={...s,state:"unsubscribed"},await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=j(t,Qf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=ff([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];const a=this._subscriptionsByHash[s];fe(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const s=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=j(t,eh);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",s?{filters:s}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=j(t,Ih);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=j(t,nh);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=j(t,sh);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let a={};r&&(a.encoding=r),i&&(a.commitment=i),s&&(a=Object.assign(a,s)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=j(t,oh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){e(a.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],s,void 0,i),f=this._makeSubscription({callback:(d,v)=>{e(d,v);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=j(t,ah);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:J([rt("instruction"),Ar("recentSlot"),vt("bumpSeed")])},FreezeLookupTable:{index:1,layout:J([rt("instruction")])},ExtendLookupTable:{index:2,layout:J([rt("instruction"),Ar(),Ae(dt(),pr(rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:J([rt("instruction")])},CloseLookupTable:{index:4,layout:J([rt("instruction")])}});new st("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:J([vt("instruction"),rt("units"),rt("additionalFee")])},RequestHeapFrame:{index:1,layout:J([vt("instruction"),rt("bytes")])},SetComputeUnitLimit:{index:2,layout:J([vt("instruction"),rt("units")])},SetComputeUnitPrice:{index:3,layout:J([vt("instruction"),Ar("microLamports")])}});new st("ComputeBudget111111111111111111111111111111");J([vt("numSignatures"),vt("padding"),Ue("signatureOffset"),Ue("signatureInstructionIndex"),Ue("publicKeyOffset"),Ue("publicKeyInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Ue("messageInstructionIndex")]);new st("Ed25519SigVerify111111111111111111111111111");J([vt("numSignatures"),Ue("signatureOffset"),vt("signatureInstructionIndex"),Ue("ethAddressOffset"),vt("ethAddressInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),vt("messageInstructionIndex"),$t(20,"ethAddress"),$t(64,"signature"),vt("recoveryId")]);new st("KeccakSecp256k11111111111111111111111111111");new st("StakeConfig11111111111111111111111111111111");class zs{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}zs.default=new zs(0,0,st.default);Object.freeze({Initialize:{index:0,layout:J([rt("instruction"),Ju(),Qu()])},Authorize:{index:1,layout:J([rt("instruction"),dt("newAuthorized"),rt("stakeAuthorizationType")])},Delegate:{index:2,layout:J([rt("instruction")])},Split:{index:3,layout:J([rt("instruction"),Re("lamports")])},Withdraw:{index:4,layout:J([rt("instruction"),Re("lamports")])},Deactivate:{index:5,layout:J([rt("instruction")])},Merge:{index:7,layout:J([rt("instruction")])},AuthorizeWithSeed:{index:8,layout:J([rt("instruction"),dt("newAuthorized"),rt("stakeAuthorizationType"),xr("authoritySeed"),dt("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});new st("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:J([rt("instruction"),tf()])},Authorize:{index:1,layout:J([rt("instruction"),dt("newAuthorized"),rt("voteAuthorizationType")])},Withdraw:{index:3,layout:J([rt("instruction"),Re("lamports")])},AuthorizeWithSeed:{index:10,layout:J([rt("instruction"),ef()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});new st("Vote111111111111111111111111111111111111111");new st("Va1idator1nfo111111111111111111111111111111");H({name:G(),website:ft(G()),details:ft(G()),keybaseUsername:ft(G())});new st("Vote111111111111111111111111111111111111111");J([dt("nodePubkey"),dt("authorizedWithdrawer"),vt("commission"),ge(),Ae(J([ge("slot"),rt("confirmationCount")]),pr(rt(),-8),"votes"),vt("rootSlotValid"),ge("rootSlot"),ge(),Ae(J([ge("epoch"),dt("authorizedVoter")]),pr(rt(),-8),"authorizedVoters"),J([Ae(J([dt("authorizedPubkey"),ge("epochOfLastAuthorizedSwitch"),ge("targetEpoch")]),32,"buf"),ge("idx"),vt("isEmpty")],"priorVoters"),ge(),Ae(J([ge("epoch"),ge("credits"),ge("prevCredits")]),pr(rt(),-8),"epochCredits"),J([ge("slot"),ge("timestamp")],"lastTimestamp")]);const Rh="https://solana-mainnet.g.alchemy.com/v2/1CtEhASFOn3piknuX0tMSM0rwZoU4_Yq",Th=new Mh(Rh,"confirmed");var Ch=Object.freeze(Object.defineProperty({__proto__:null,solanaConnection:Th},Symbol.toStringTag,{value:"Module"}));export{F as A,Z as B,Q as C,ft as D,Ye as E,Io as F,ke as G,j as H,Ue as I,$t as J,ms as K,ws as L,Hc as M,so as N,oo as O,Wt as P,to as Q,Tc as R,Cc as S,Js as T,mn as U,ze as V,Th as W,Ch as X,Cn as _,Co as a,Fn as b,On as c,Un as d,Ji as e,za as f,Dn as g,J as h,Nn as i,rt as j,Re as k,vt as l,Ae as m,ge as n,pr as o,Pn as p,Zr as q,mu as r,pn as s,G as t,Br as u,Xi as v,Yi as w,Ct as x,Vr as y,H as z};
